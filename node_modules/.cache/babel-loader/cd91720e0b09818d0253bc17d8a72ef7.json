{"ast":null,"code":"var zrUtil = require(\"zrender/lib/core/util\");\n\nvar pathTool = require(\"zrender/lib/tool/path\");\n\nvar colorTool = require(\"zrender/lib/tool/color\");\n\nvar matrix = require(\"zrender/lib/core/matrix\");\n\nvar vector = require(\"zrender/lib/core/vector\");\n\nvar Path = require(\"zrender/lib/graphic/Path\");\n\nvar Transformable = require(\"zrender/lib/mixin/Transformable\");\n\nvar ZImage = require(\"zrender/lib/graphic/Image\");\n\nexports.Image = ZImage;\n\nvar Group = require(\"zrender/lib/container/Group\");\n\nexports.Group = Group;\n\nvar Text = require(\"zrender/lib/graphic/Text\");\n\nexports.Text = Text;\n\nvar Circle = require(\"zrender/lib/graphic/shape/Circle\");\n\nexports.Circle = Circle;\n\nvar Sector = require(\"zrender/lib/graphic/shape/Sector\");\n\nexports.Sector = Sector;\n\nvar Ring = require(\"zrender/lib/graphic/shape/Ring\");\n\nexports.Ring = Ring;\n\nvar Polygon = require(\"zrender/lib/graphic/shape/Polygon\");\n\nexports.Polygon = Polygon;\n\nvar Polyline = require(\"zrender/lib/graphic/shape/Polyline\");\n\nexports.Polyline = Polyline;\n\nvar Rect = require(\"zrender/lib/graphic/shape/Rect\");\n\nexports.Rect = Rect;\n\nvar Line = require(\"zrender/lib/graphic/shape/Line\");\n\nexports.Line = Line;\n\nvar BezierCurve = require(\"zrender/lib/graphic/shape/BezierCurve\");\n\nexports.BezierCurve = BezierCurve;\n\nvar Arc = require(\"zrender/lib/graphic/shape/Arc\");\n\nexports.Arc = Arc;\n\nvar CompoundPath = require(\"zrender/lib/graphic/CompoundPath\");\n\nexports.CompoundPath = CompoundPath;\n\nvar LinearGradient = require(\"zrender/lib/graphic/LinearGradient\");\n\nexports.LinearGradient = LinearGradient;\n\nvar RadialGradient = require(\"zrender/lib/graphic/RadialGradient\");\n\nexports.RadialGradient = RadialGradient;\n\nvar BoundingRect = require(\"zrender/lib/core/BoundingRect\");\n\nexports.BoundingRect = BoundingRect;\n\nvar IncrementalDisplayable = require(\"zrender/lib/graphic/IncrementalDisplayable\");\n\nexports.IncrementalDisplayable = IncrementalDisplayable;\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar round = Math.round;\nvar mathMax = Math.max;\nvar mathMin = Math.min;\nvar EMPTY_OBJ = {};\n/**\n * Extend shape with parameters\n */\n\nfunction extendShape(opts) {\n  return Path.extend(opts);\n}\n/**\n * Extend path\n */\n\n\nfunction extendPath(pathData, opts) {\n  return pathTool.extendFromString(pathData, opts);\n}\n/**\n * Create a path element from path data string\n * @param {string} pathData\n * @param {Object} opts\n * @param {module:zrender/core/BoundingRect} rect\n * @param {string} [layout=cover] 'center' or 'cover'\n */\n\n\nfunction makePath(pathData, opts, rect, layout) {\n  var path = pathTool.createFromString(pathData, opts);\n  var boundingRect = path.getBoundingRect();\n\n  if (rect) {\n    if (layout === 'center') {\n      rect = centerGraphic(rect, boundingRect);\n    }\n\n    resizePath(path, rect);\n  }\n\n  return path;\n}\n/**\n * Create a image element from image url\n * @param {string} imageUrl image url\n * @param {Object} opts options\n * @param {module:zrender/core/BoundingRect} rect constrain rect\n * @param {string} [layout=cover] 'center' or 'cover'\n */\n\n\nfunction makeImage(imageUrl, rect, layout) {\n  var path = new ZImage({\n    style: {\n      image: imageUrl,\n      x: rect.x,\n      y: rect.y,\n      width: rect.width,\n      height: rect.height\n    },\n    onload: function (img) {\n      if (layout === 'center') {\n        var boundingRect = {\n          width: img.width,\n          height: img.height\n        };\n        path.setStyle(centerGraphic(rect, boundingRect));\n      }\n    }\n  });\n  return path;\n}\n/**\n * Get position of centered element in bounding box.\n *\n * @param  {Object} rect         element local bounding box\n * @param  {Object} boundingRect constraint bounding box\n * @return {Object} element position containing x, y, width, and height\n */\n\n\nfunction centerGraphic(rect, boundingRect) {\n  // Set rect to center, keep width / height ratio.\n  var aspect = boundingRect.width / boundingRect.height;\n  var width = rect.height * aspect;\n  var height;\n\n  if (width <= rect.width) {\n    height = rect.height;\n  } else {\n    width = rect.width;\n    height = width / aspect;\n  }\n\n  var cx = rect.x + rect.width / 2;\n  var cy = rect.y + rect.height / 2;\n  return {\n    x: cx - width / 2,\n    y: cy - height / 2,\n    width: width,\n    height: height\n  };\n}\n\nvar mergePath = pathTool.mergePath;\n/**\n * Resize a path to fit the rect\n * @param {module:zrender/graphic/Path} path\n * @param {Object} rect\n */\n\nfunction resizePath(path, rect) {\n  if (!path.applyTransform) {\n    return;\n  }\n\n  var pathRect = path.getBoundingRect();\n  var m = pathRect.calculateTransform(rect);\n  path.applyTransform(m);\n}\n/**\n * Sub pixel optimize line for canvas\n *\n * @param {Object} param\n * @param {Object} [param.shape]\n * @param {number} [param.shape.x1]\n * @param {number} [param.shape.y1]\n * @param {number} [param.shape.x2]\n * @param {number} [param.shape.y2]\n * @param {Object} [param.style]\n * @param {number} [param.style.lineWidth]\n * @return {Object} Modified param\n */\n\n\nfunction subPixelOptimizeLine(param) {\n  var shape = param.shape;\n  var lineWidth = param.style.lineWidth;\n\n  if (round(shape.x1 * 2) === round(shape.x2 * 2)) {\n    shape.x1 = shape.x2 = subPixelOptimize(shape.x1, lineWidth, true);\n  }\n\n  if (round(shape.y1 * 2) === round(shape.y2 * 2)) {\n    shape.y1 = shape.y2 = subPixelOptimize(shape.y1, lineWidth, true);\n  }\n\n  return param;\n}\n/**\n * Sub pixel optimize rect for canvas\n *\n * @param {Object} param\n * @param {Object} [param.shape]\n * @param {number} [param.shape.x]\n * @param {number} [param.shape.y]\n * @param {number} [param.shape.width]\n * @param {number} [param.shape.height]\n * @param {Object} [param.style]\n * @param {number} [param.style.lineWidth]\n * @return {Object} Modified param\n */\n\n\nfunction subPixelOptimizeRect(param) {\n  var shape = param.shape;\n  var lineWidth = param.style.lineWidth;\n  var originX = shape.x;\n  var originY = shape.y;\n  var originWidth = shape.width;\n  var originHeight = shape.height;\n  shape.x = subPixelOptimize(shape.x, lineWidth, true);\n  shape.y = subPixelOptimize(shape.y, lineWidth, true);\n  shape.width = Math.max(subPixelOptimize(originX + originWidth, lineWidth, false) - shape.x, originWidth === 0 ? 0 : 1);\n  shape.height = Math.max(subPixelOptimize(originY + originHeight, lineWidth, false) - shape.y, originHeight === 0 ? 0 : 1);\n  return param;\n}\n/**\n * Sub pixel optimize for canvas\n *\n * @param {number} position Coordinate, such as x, y\n * @param {number} lineWidth Should be nonnegative integer.\n * @param {boolean=} positiveOrNegative Default false (negative).\n * @return {number} Optimized position.\n */\n\n\nfunction subPixelOptimize(position, lineWidth, positiveOrNegative) {\n  // Assure that (position + lineWidth / 2) is near integer edge,\n  // otherwise line will be fuzzy in canvas.\n  var doubledPosition = round(position * 2);\n  return (doubledPosition + round(lineWidth)) % 2 === 0 ? doubledPosition / 2 : (doubledPosition + (positiveOrNegative ? 1 : -1)) / 2;\n}\n\nfunction hasFillOrStroke(fillOrStroke) {\n  return fillOrStroke != null && fillOrStroke != 'none';\n}\n\nfunction liftColor(color) {\n  return typeof color === 'string' ? colorTool.lift(color, -0.1) : color;\n}\n/**\n * @private\n */\n\n\nfunction cacheElementStl(el) {\n  if (el.__hoverStlDirty) {\n    var stroke = el.style.stroke;\n    var fill = el.style.fill; // Create hoverStyle on mouseover\n\n    var hoverStyle = el.__hoverStl;\n    hoverStyle.fill = hoverStyle.fill || (hasFillOrStroke(fill) ? liftColor(fill) : null);\n    hoverStyle.stroke = hoverStyle.stroke || (hasFillOrStroke(stroke) ? liftColor(stroke) : null);\n    var normalStyle = {};\n\n    for (var name in hoverStyle) {\n      // See comment in `doSingleEnterHover`.\n      if (hoverStyle[name] != null) {\n        normalStyle[name] = el.style[name];\n      }\n    }\n\n    el.__normalStl = normalStyle;\n    el.__hoverStlDirty = false;\n  }\n}\n/**\n * @private\n */\n\n\nfunction doSingleEnterHover(el) {\n  if (el.__isHover) {\n    return;\n  }\n\n  cacheElementStl(el);\n\n  if (el.useHoverLayer) {\n    el.__zr && el.__zr.addHover(el, el.__hoverStl);\n  } else {\n    var style = el.style;\n    var insideRollbackOpt = style.insideRollbackOpt; // Consider case: only `position: 'top'` is set on emphasis, then text\n    // color should be returned to `autoColor`, rather than remain '#fff'.\n    // So we should rollback then apply again after style merging.\n\n    insideRollbackOpt && rollbackInsideStyle(style); // styles can be:\n    // {\n    //    label: {\n    //        show: false,\n    //        position: 'outside',\n    //        fontSize: 18\n    //    },\n    //    emphasis: {\n    //        label: {\n    //            show: true\n    //        }\n    //    }\n    // },\n    // where properties of `emphasis` may not appear in `normal`. We previously use\n    // module:echarts/util/model#defaultEmphasis to merge `normal` to `emphasis`.\n    // But consider rich text and setOption in merge mode, it is impossible to cover\n    // all properties in merge. So we use merge mode when setting style here, where\n    // only properties that is not `null/undefined` can be set. The disadventage:\n    // null/undefined can not be used to remove style any more in `emphasis`.\n\n    style.extendFrom(el.__hoverStl); // Do not save `insideRollback`.\n\n    if (insideRollbackOpt) {\n      applyInsideStyle(style, style.insideOriginalTextPosition, insideRollbackOpt); // textFill may be rollbacked to null.\n\n      if (style.textFill == null) {\n        style.textFill = insideRollbackOpt.autoColor;\n      }\n    }\n\n    el.dirty(false);\n    el.z2 += 1;\n  }\n\n  el.__isHover = true;\n}\n/**\n * @inner\n */\n\n\nfunction doSingleLeaveHover(el) {\n  if (!el.__isHover) {\n    return;\n  }\n\n  var normalStl = el.__normalStl;\n\n  if (el.useHoverLayer) {\n    el.__zr && el.__zr.removeHover(el);\n  } else {\n    // Consider null/undefined value, should use\n    // `setStyle` but not `extendFrom(stl, true)`.\n    normalStl && el.setStyle(normalStl);\n    el.z2 -= 1;\n  }\n\n  el.__isHover = false;\n}\n/**\n * @inner\n */\n\n\nfunction doEnterHover(el) {\n  el.type === 'group' ? el.traverse(function (child) {\n    if (child.type !== 'group') {\n      doSingleEnterHover(child);\n    }\n  }) : doSingleEnterHover(el);\n}\n\nfunction doLeaveHover(el) {\n  el.type === 'group' ? el.traverse(function (child) {\n    if (child.type !== 'group') {\n      doSingleLeaveHover(child);\n    }\n  }) : doSingleLeaveHover(el);\n}\n/**\n * @inner\n */\n\n\nfunction setElementHoverStl(el, hoverStl) {\n  // If element has sepcified hoverStyle, then use it instead of given hoverStyle\n  // Often used when item group has a label element and it's hoverStyle is different\n  el.__hoverStl = el.hoverStyle || hoverStl || {};\n  el.__hoverStlDirty = true;\n\n  if (el.__isHover) {\n    cacheElementStl(el);\n  }\n}\n/**\n * @inner\n */\n\n\nfunction onElementMouseOver(e) {\n  if (this.__hoverSilentOnTouch && e.zrByTouch) {\n    return;\n  } // Only if element is not in emphasis status\n\n\n  !this.__isEmphasis && doEnterHover(this);\n}\n/**\n * @inner\n */\n\n\nfunction onElementMouseOut(e) {\n  if (this.__hoverSilentOnTouch && e.zrByTouch) {\n    return;\n  } // Only if element is not in emphasis status\n\n\n  !this.__isEmphasis && doLeaveHover(this);\n}\n/**\n * @inner\n */\n\n\nfunction enterEmphasis() {\n  this.__isEmphasis = true;\n  doEnterHover(this);\n}\n/**\n * @inner\n */\n\n\nfunction leaveEmphasis() {\n  this.__isEmphasis = false;\n  doLeaveHover(this);\n}\n/**\n * Set hover style of element.\n * This method can be called repeatly without side-effects.\n * @param {module:zrender/Element} el\n * @param {Object} [hoverStyle]\n * @param {Object} [opt]\n * @param {boolean} [opt.hoverSilentOnTouch=false]\n *        In touch device, mouseover event will be trigger on touchstart event\n *        (see module:zrender/dom/HandlerProxy). By this mechanism, we can\n *        conviniently use hoverStyle when tap on touch screen without additional\n *        code for compatibility.\n *        But if the chart/component has select feature, which usually also use\n *        hoverStyle, there might be conflict between 'select-highlight' and\n *        'hover-highlight' especially when roam is enabled (see geo for example).\n *        In this case, hoverSilentOnTouch should be used to disable hover-highlight\n *        on touch device.\n */\n\n\nfunction setHoverStyle(el, hoverStyle, opt) {\n  el.__hoverSilentOnTouch = opt && opt.hoverSilentOnTouch;\n  el.type === 'group' ? el.traverse(function (child) {\n    if (child.type !== 'group') {\n      setElementHoverStl(child, hoverStyle);\n    }\n  }) : setElementHoverStl(el, hoverStyle); // Duplicated function will be auto-ignored, see Eventful.js.\n\n  el.on('mouseover', onElementMouseOver).on('mouseout', onElementMouseOut); // Emphasis, normal can be triggered manually\n\n  el.on('emphasis', enterEmphasis).on('normal', leaveEmphasis);\n}\n/**\n * @param {Object|module:zrender/graphic/Style} normalStyle\n * @param {Object} emphasisStyle\n * @param {module:echarts/model/Model} normalModel\n * @param {module:echarts/model/Model} emphasisModel\n * @param {Object} opt Check `opt` of `setTextStyleCommon` to find other props.\n * @param {string|Function} [opt.defaultText]\n * @param {module:echarts/model/Model} [opt.labelFetcher] Fetch text by\n *      `opt.labelFetcher.getFormattedLabel(opt.labelDataIndex, 'normal'/'emphasis', null, opt.labelDimIndex)`\n * @param {module:echarts/model/Model} [opt.labelDataIndex] Fetch text by\n *      `opt.textFetcher.getFormattedLabel(opt.labelDataIndex, 'normal'/'emphasis', null, opt.labelDimIndex)`\n * @param {module:echarts/model/Model} [opt.labelDimIndex] Fetch text by\n *      `opt.textFetcher.getFormattedLabel(opt.labelDataIndex, 'normal'/'emphasis', null, opt.labelDimIndex)`\n * @param {Object} [normalSpecified]\n * @param {Object} [emphasisSpecified]\n */\n\n\nfunction setLabelStyle(normalStyle, emphasisStyle, normalModel, emphasisModel, opt, normalSpecified, emphasisSpecified) {\n  opt = opt || EMPTY_OBJ;\n  var labelFetcher = opt.labelFetcher;\n  var labelDataIndex = opt.labelDataIndex;\n  var labelDimIndex = opt.labelDimIndex; // This scenario, `label.normal.show = true; label.emphasis.show = false`,\n  // is not supported util someone requests.\n\n  var showNormal = normalModel.getShallow('show');\n  var showEmphasis = emphasisModel.getShallow('show'); // Consider performance, only fetch label when necessary.\n  // If `normal.show` is `false` and `emphasis.show` is `true` and `emphasis.formatter` is not set,\n  // label should be displayed, where text is fetched by `normal.formatter` or `opt.defaultText`.\n\n  var baseText;\n\n  if (showNormal || showEmphasis) {\n    if (labelFetcher) {\n      baseText = labelFetcher.getFormattedLabel(labelDataIndex, 'normal', null, labelDimIndex);\n    }\n\n    if (baseText == null) {\n      baseText = zrUtil.isFunction(opt.defaultText) ? opt.defaultText(labelDataIndex, opt) : opt.defaultText;\n    }\n  }\n\n  var normalStyleText = showNormal ? baseText : null;\n  var emphasisStyleText = showEmphasis ? zrUtil.retrieve2(labelFetcher ? labelFetcher.getFormattedLabel(labelDataIndex, 'emphasis', null, labelDimIndex) : null, baseText) : null; // Optimize: If style.text is null, text will not be drawn.\n\n  if (normalStyleText != null || emphasisStyleText != null) {\n    // Always set `textStyle` even if `normalStyle.text` is null, because default\n    // values have to be set on `normalStyle`.\n    // If we set default values on `emphasisStyle`, consider case:\n    // Firstly, `setOption(... label: {normal: {text: null}, emphasis: {show: true}} ...);`\n    // Secondly, `setOption(... label: {noraml: {show: true, text: 'abc', color: 'red'} ...);`\n    // Then the 'red' will not work on emphasis.\n    setTextStyle(normalStyle, normalModel, normalSpecified, opt);\n    setTextStyle(emphasisStyle, emphasisModel, emphasisSpecified, opt, true);\n  }\n\n  normalStyle.text = normalStyleText;\n  emphasisStyle.text = emphasisStyleText;\n}\n/**\n * Set basic textStyle properties.\n * @param {Object|module:zrender/graphic/Style} textStyle\n * @param {module:echarts/model/Model} model\n * @param {Object} [specifiedTextStyle] Can be overrided by settings in model.\n * @param {Object} [opt] See `opt` of `setTextStyleCommon`.\n * @param {boolean} [isEmphasis]\n */\n\n\nfunction setTextStyle(textStyle, textStyleModel, specifiedTextStyle, opt, isEmphasis) {\n  setTextStyleCommon(textStyle, textStyleModel, opt, isEmphasis);\n  specifiedTextStyle && zrUtil.extend(textStyle, specifiedTextStyle);\n  textStyle.host && textStyle.host.dirty && textStyle.host.dirty(false);\n  return textStyle;\n}\n/**\n * Set text option in the style.\n * @deprecated\n * @param {Object} textStyle\n * @param {module:echarts/model/Model} labelModel\n * @param {string|boolean} defaultColor Default text color.\n *        If set as false, it will be processed as a emphasis style.\n */\n\n\nfunction setText(textStyle, labelModel, defaultColor) {\n  var opt = {\n    isRectText: true\n  };\n  var isEmphasis;\n\n  if (defaultColor === false) {\n    isEmphasis = true;\n  } else {\n    // Support setting color as 'auto' to get visual color.\n    opt.autoColor = defaultColor;\n  }\n\n  setTextStyleCommon(textStyle, labelModel, opt, isEmphasis);\n  textStyle.host && textStyle.host.dirty && textStyle.host.dirty(false);\n}\n/**\n * {\n *      disableBox: boolean, Whether diable drawing box of block (outer most).\n *      isRectText: boolean,\n *      autoColor: string, specify a color when color is 'auto',\n *              for textFill, textStroke, textBackgroundColor, and textBorderColor.\n *              If autoColor specified, it is used as default textFill.\n *      useInsideStyle:\n *              `true`: Use inside style (textFill, textStroke, textStrokeWidth)\n *                  if `textFill` is not specified.\n *              `false`: Do not use inside style.\n *              `null/undefined`: use inside style if `isRectText` is true and\n *                  `textFill` is not specified and textPosition contains `'inside'`.\n *      forceRich: boolean\n * }\n */\n\n\nfunction setTextStyleCommon(textStyle, textStyleModel, opt, isEmphasis) {\n  // Consider there will be abnormal when merge hover style to normal style if given default value.\n  opt = opt || EMPTY_OBJ;\n\n  if (opt.isRectText) {\n    var textPosition = textStyleModel.getShallow('position') || (isEmphasis ? null : 'inside'); // 'outside' is not a valid zr textPostion value, but used\n    // in bar series, and magric type should be considered.\n\n    textPosition === 'outside' && (textPosition = 'top');\n    textStyle.textPosition = textPosition;\n    textStyle.textOffset = textStyleModel.getShallow('offset');\n    var labelRotate = textStyleModel.getShallow('rotate');\n    labelRotate != null && (labelRotate *= Math.PI / 180);\n    textStyle.textRotation = labelRotate;\n    textStyle.textDistance = zrUtil.retrieve2(textStyleModel.getShallow('distance'), isEmphasis ? null : 5);\n  }\n\n  var ecModel = textStyleModel.ecModel;\n  var globalTextStyle = ecModel && ecModel.option.textStyle; // Consider case:\n  // {\n  //     data: [{\n  //         value: 12,\n  //         label: {\n  //             rich: {\n  //                 // no 'a' here but using parent 'a'.\n  //             }\n  //         }\n  //     }],\n  //     rich: {\n  //         a: { ... }\n  //     }\n  // }\n\n  var richItemNames = getRichItemNames(textStyleModel);\n  var richResult;\n\n  if (richItemNames) {\n    richResult = {};\n\n    for (var name in richItemNames) {\n      if (richItemNames.hasOwnProperty(name)) {\n        // Cascade is supported in rich.\n        var richTextStyle = textStyleModel.getModel(['rich', name]); // In rich, never `disableBox`.\n\n        setTokenTextStyle(richResult[name] = {}, richTextStyle, globalTextStyle, opt, isEmphasis);\n      }\n    }\n  }\n\n  textStyle.rich = richResult;\n  setTokenTextStyle(textStyle, textStyleModel, globalTextStyle, opt, isEmphasis, true);\n\n  if (opt.forceRich && !opt.textStyle) {\n    opt.textStyle = {};\n  }\n\n  return textStyle;\n} // Consider case:\n// {\n//     data: [{\n//         value: 12,\n//         label: {\n//             rich: {\n//                 // no 'a' here but using parent 'a'.\n//             }\n//         }\n//     }],\n//     rich: {\n//         a: { ... }\n//     }\n// }\n\n\nfunction getRichItemNames(textStyleModel) {\n  // Use object to remove duplicated names.\n  var richItemNameMap;\n\n  while (textStyleModel && textStyleModel !== textStyleModel.ecModel) {\n    var rich = (textStyleModel.option || EMPTY_OBJ).rich;\n\n    if (rich) {\n      richItemNameMap = richItemNameMap || {};\n\n      for (var name in rich) {\n        if (rich.hasOwnProperty(name)) {\n          richItemNameMap[name] = 1;\n        }\n      }\n    }\n\n    textStyleModel = textStyleModel.parentModel;\n  }\n\n  return richItemNameMap;\n}\n\nfunction setTokenTextStyle(textStyle, textStyleModel, globalTextStyle, opt, isEmphasis, isBlock) {\n  // In merge mode, default value should not be given.\n  globalTextStyle = !isEmphasis && globalTextStyle || EMPTY_OBJ;\n  textStyle.textFill = getAutoColor(textStyleModel.getShallow('color'), opt) || globalTextStyle.color;\n  textStyle.textStroke = getAutoColor(textStyleModel.getShallow('textBorderColor'), opt) || globalTextStyle.textBorderColor;\n  textStyle.textStrokeWidth = zrUtil.retrieve2(textStyleModel.getShallow('textBorderWidth'), globalTextStyle.textBorderWidth);\n\n  if (!isEmphasis) {\n    if (isBlock) {\n      // Always set `insideRollback`, for clearing previous.\n      var originalTextPosition = textStyle.textPosition;\n      textStyle.insideRollback = applyInsideStyle(textStyle, originalTextPosition, opt); // Save original textPosition, because style.textPosition will be repalced by\n      // real location (like [10, 30]) in zrender.\n\n      textStyle.insideOriginalTextPosition = originalTextPosition;\n      textStyle.insideRollbackOpt = opt;\n    } // Set default finally.\n\n\n    if (textStyle.textFill == null) {\n      textStyle.textFill = opt.autoColor;\n    }\n  } // Do not use `getFont` here, because merge should be supported, where\n  // part of these properties may be changed in emphasis style, and the\n  // others should remain their original value got from normal style.\n\n\n  textStyle.fontStyle = textStyleModel.getShallow('fontStyle') || globalTextStyle.fontStyle;\n  textStyle.fontWeight = textStyleModel.getShallow('fontWeight') || globalTextStyle.fontWeight;\n  textStyle.fontSize = textStyleModel.getShallow('fontSize') || globalTextStyle.fontSize;\n  textStyle.fontFamily = textStyleModel.getShallow('fontFamily') || globalTextStyle.fontFamily;\n  textStyle.textAlign = textStyleModel.getShallow('align');\n  textStyle.textVerticalAlign = textStyleModel.getShallow('verticalAlign') || textStyleModel.getShallow('baseline');\n  textStyle.textLineHeight = textStyleModel.getShallow('lineHeight');\n  textStyle.textWidth = textStyleModel.getShallow('width');\n  textStyle.textHeight = textStyleModel.getShallow('height');\n  textStyle.textTag = textStyleModel.getShallow('tag');\n\n  if (!isBlock || !opt.disableBox) {\n    textStyle.textBackgroundColor = getAutoColor(textStyleModel.getShallow('backgroundColor'), opt);\n    textStyle.textPadding = textStyleModel.getShallow('padding');\n    textStyle.textBorderColor = getAutoColor(textStyleModel.getShallow('borderColor'), opt);\n    textStyle.textBorderWidth = textStyleModel.getShallow('borderWidth');\n    textStyle.textBorderRadius = textStyleModel.getShallow('borderRadius');\n    textStyle.textBoxShadowColor = textStyleModel.getShallow('shadowColor');\n    textStyle.textBoxShadowBlur = textStyleModel.getShallow('shadowBlur');\n    textStyle.textBoxShadowOffsetX = textStyleModel.getShallow('shadowOffsetX');\n    textStyle.textBoxShadowOffsetY = textStyleModel.getShallow('shadowOffsetY');\n  }\n\n  textStyle.textShadowColor = textStyleModel.getShallow('textShadowColor') || globalTextStyle.textShadowColor;\n  textStyle.textShadowBlur = textStyleModel.getShallow('textShadowBlur') || globalTextStyle.textShadowBlur;\n  textStyle.textShadowOffsetX = textStyleModel.getShallow('textShadowOffsetX') || globalTextStyle.textShadowOffsetX;\n  textStyle.textShadowOffsetY = textStyleModel.getShallow('textShadowOffsetY') || globalTextStyle.textShadowOffsetY;\n}\n\nfunction getAutoColor(color, opt) {\n  return color !== 'auto' ? color : opt && opt.autoColor ? opt.autoColor : null;\n}\n\nfunction applyInsideStyle(textStyle, textPosition, opt) {\n  var useInsideStyle = opt.useInsideStyle;\n  var insideRollback;\n\n  if (textStyle.textFill == null && useInsideStyle !== false && (useInsideStyle === true || opt.isRectText && textPosition // textPosition can be [10, 30]\n  && typeof textPosition === 'string' && textPosition.indexOf('inside') >= 0)) {\n    insideRollback = {\n      textFill: null,\n      textStroke: textStyle.textStroke,\n      textStrokeWidth: textStyle.textStrokeWidth\n    };\n    textStyle.textFill = '#fff'; // Consider text with #fff overflow its container.\n\n    if (textStyle.textStroke == null) {\n      textStyle.textStroke = opt.autoColor;\n      textStyle.textStrokeWidth == null && (textStyle.textStrokeWidth = 2);\n    }\n  }\n\n  return insideRollback;\n}\n\nfunction rollbackInsideStyle(style) {\n  var insideRollback = style.insideRollback;\n\n  if (insideRollback) {\n    style.textFill = insideRollback.textFill;\n    style.textStroke = insideRollback.textStroke;\n    style.textStrokeWidth = insideRollback.textStrokeWidth;\n  }\n}\n\nfunction getFont(opt, ecModel) {\n  // ecModel or default text style model.\n  var gTextStyleModel = ecModel || ecModel.getModel('textStyle');\n  return zrUtil.trim([// FIXME in node-canvas fontWeight is before fontStyle\n  opt.fontStyle || gTextStyleModel && gTextStyleModel.getShallow('fontStyle') || '', opt.fontWeight || gTextStyleModel && gTextStyleModel.getShallow('fontWeight') || '', (opt.fontSize || gTextStyleModel && gTextStyleModel.getShallow('fontSize') || 12) + 'px', opt.fontFamily || gTextStyleModel && gTextStyleModel.getShallow('fontFamily') || 'sans-serif'].join(' '));\n}\n\nfunction animateOrSetProps(isUpdate, el, props, animatableModel, dataIndex, cb) {\n  if (typeof dataIndex === 'function') {\n    cb = dataIndex;\n    dataIndex = null;\n  } // Do not check 'animation' property directly here. Consider this case:\n  // animation model is an `itemModel`, whose does not have `isAnimationEnabled`\n  // but its parent model (`seriesModel`) does.\n\n\n  var animationEnabled = animatableModel && animatableModel.isAnimationEnabled();\n\n  if (animationEnabled) {\n    var postfix = isUpdate ? 'Update' : '';\n    var duration = animatableModel.getShallow('animationDuration' + postfix);\n    var animationEasing = animatableModel.getShallow('animationEasing' + postfix);\n    var animationDelay = animatableModel.getShallow('animationDelay' + postfix);\n\n    if (typeof animationDelay === 'function') {\n      animationDelay = animationDelay(dataIndex, animatableModel.getAnimationDelayParams ? animatableModel.getAnimationDelayParams(el, dataIndex) : null);\n    }\n\n    if (typeof duration === 'function') {\n      duration = duration(dataIndex);\n    }\n\n    duration > 0 ? el.animateTo(props, duration, animationDelay || 0, animationEasing, cb, !!cb) : (el.stopAnimation(), el.attr(props), cb && cb());\n  } else {\n    el.stopAnimation();\n    el.attr(props);\n    cb && cb();\n  }\n}\n/**\n * Update graphic element properties with or without animation according to the\n * configuration in series.\n *\n * Caution: this method will stop previous animation.\n * So if do not use this method to one element twice before\n * animation starts, unless you know what you are doing.\n *\n * @param {module:zrender/Element} el\n * @param {Object} props\n * @param {module:echarts/model/Model} [animatableModel]\n * @param {number} [dataIndex]\n * @param {Function} [cb]\n * @example\n *     graphic.updateProps(el, {\n *         position: [100, 100]\n *     }, seriesModel, dataIndex, function () { console.log('Animation done!'); });\n *     // Or\n *     graphic.updateProps(el, {\n *         position: [100, 100]\n *     }, seriesModel, function () { console.log('Animation done!'); });\n */\n\n\nfunction updateProps(el, props, animatableModel, dataIndex, cb) {\n  animateOrSetProps(true, el, props, animatableModel, dataIndex, cb);\n}\n/**\n * Init graphic element properties with or without animation according to the\n * configuration in series.\n *\n * Caution: this method will stop previous animation.\n * So if do not use this method to one element twice before\n * animation starts, unless you know what you are doing.\n *\n * @param {module:zrender/Element} el\n * @param {Object} props\n * @param {module:echarts/model/Model} [animatableModel]\n * @param {number} [dataIndex]\n * @param {Function} cb\n */\n\n\nfunction initProps(el, props, animatableModel, dataIndex, cb) {\n  animateOrSetProps(false, el, props, animatableModel, dataIndex, cb);\n}\n/**\n * Get transform matrix of target (param target),\n * in coordinate of its ancestor (param ancestor)\n *\n * @param {module:zrender/mixin/Transformable} target\n * @param {module:zrender/mixin/Transformable} [ancestor]\n */\n\n\nfunction getTransform(target, ancestor) {\n  var mat = matrix.identity([]);\n\n  while (target && target !== ancestor) {\n    matrix.mul(mat, target.getLocalTransform(), mat);\n    target = target.parent;\n  }\n\n  return mat;\n}\n/**\n * Apply transform to an vertex.\n * @param {Array.<number>} target [x, y]\n * @param {Array.<number>|TypedArray.<number>|Object} transform Can be:\n *      + Transform matrix: like [1, 0, 0, 1, 0, 0]\n *      + {position, rotation, scale}, the same as `zrender/Transformable`.\n * @param {boolean=} invert Whether use invert matrix.\n * @return {Array.<number>} [x, y]\n */\n\n\nfunction applyTransform(target, transform, invert) {\n  if (transform && !zrUtil.isArrayLike(transform)) {\n    transform = Transformable.getLocalTransform(transform);\n  }\n\n  if (invert) {\n    transform = matrix.invert([], transform);\n  }\n\n  return vector.applyTransform([], target, transform);\n}\n/**\n * @param {string} direction 'left' 'right' 'top' 'bottom'\n * @param {Array.<number>} transform Transform matrix: like [1, 0, 0, 1, 0, 0]\n * @param {boolean=} invert Whether use invert matrix.\n * @return {string} Transformed direction. 'left' 'right' 'top' 'bottom'\n */\n\n\nfunction transformDirection(direction, transform, invert) {\n  // Pick a base, ensure that transform result will not be (0, 0).\n  var hBase = transform[4] === 0 || transform[5] === 0 || transform[0] === 0 ? 1 : Math.abs(2 * transform[4] / transform[0]);\n  var vBase = transform[4] === 0 || transform[5] === 0 || transform[2] === 0 ? 1 : Math.abs(2 * transform[4] / transform[2]);\n  var vertex = [direction === 'left' ? -hBase : direction === 'right' ? hBase : 0, direction === 'top' ? -vBase : direction === 'bottom' ? vBase : 0];\n  vertex = applyTransform(vertex, transform, invert);\n  return Math.abs(vertex[0]) > Math.abs(vertex[1]) ? vertex[0] > 0 ? 'right' : 'left' : vertex[1] > 0 ? 'bottom' : 'top';\n}\n/**\n * Apply group transition animation from g1 to g2.\n * If no animatableModel, no animation.\n */\n\n\nfunction groupTransition(g1, g2, animatableModel, cb) {\n  if (!g1 || !g2) {\n    return;\n  }\n\n  function getElMap(g) {\n    var elMap = {};\n    g.traverse(function (el) {\n      if (!el.isGroup && el.anid) {\n        elMap[el.anid] = el;\n      }\n    });\n    return elMap;\n  }\n\n  function getAnimatableProps(el) {\n    var obj = {\n      position: vector.clone(el.position),\n      rotation: el.rotation\n    };\n\n    if (el.shape) {\n      obj.shape = zrUtil.extend({}, el.shape);\n    }\n\n    return obj;\n  }\n\n  var elMap1 = getElMap(g1);\n  g2.traverse(function (el) {\n    if (!el.isGroup && el.anid) {\n      var oldEl = elMap1[el.anid];\n\n      if (oldEl) {\n        var newProp = getAnimatableProps(el);\n        el.attr(getAnimatableProps(oldEl));\n        updateProps(el, newProp, animatableModel, el.dataIndex);\n      } // else {\n      //     if (el.previousProps) {\n      //         graphic.updateProps\n      //     }\n      // }\n\n    }\n  });\n}\n/**\n * @param {Array.<Array.<number>>} points Like: [[23, 44], [53, 66], ...]\n * @param {Object} rect {x, y, width, height}\n * @return {Array.<Array.<number>>} A new clipped points.\n */\n\n\nfunction clipPointsByRect(points, rect) {\n  return zrUtil.map(points, function (point) {\n    var x = point[0];\n    x = mathMax(x, rect.x);\n    x = mathMin(x, rect.x + rect.width);\n    var y = point[1];\n    y = mathMax(y, rect.y);\n    y = mathMin(y, rect.y + rect.height);\n    return [x, y];\n  });\n}\n/**\n * @param {Object} targetRect {x, y, width, height}\n * @param {Object} rect {x, y, width, height}\n * @return {Object} A new clipped rect. If rect size are negative, return undefined.\n */\n\n\nfunction clipRectByRect(targetRect, rect) {\n  var x = mathMax(targetRect.x, rect.x);\n  var x2 = mathMin(targetRect.x + targetRect.width, rect.x + rect.width);\n  var y = mathMax(targetRect.y, rect.y);\n  var y2 = mathMin(targetRect.y + targetRect.height, rect.y + rect.height);\n\n  if (x2 >= x && y2 >= y) {\n    return {\n      x: x,\n      y: y,\n      width: x2 - x,\n      height: y2 - y\n    };\n  }\n}\n/**\n * @param {string} iconStr Support 'image://' or 'path://' or direct svg path.\n * @param {Object} [opt] Properties of `module:zrender/Element`, except `style`.\n * @param {Object} [rect] {x, y, width, height}\n * @return {module:zrender/Element} Icon path or image element.\n */\n\n\nfunction createIcon(iconStr, opt, rect) {\n  opt = zrUtil.extend({\n    rectHover: true\n  }, opt);\n  var style = opt.style = {\n    strokeNoScale: true\n  };\n  rect = rect || {\n    x: -1,\n    y: -1,\n    width: 2,\n    height: 2\n  };\n\n  if (iconStr) {\n    return iconStr.indexOf('image://') === 0 ? (style.image = iconStr.slice(8), zrUtil.defaults(style, rect), new ZImage(opt)) : makePath(iconStr.replace('path://', ''), opt, rect, 'center');\n  }\n}\n\nexports.extendShape = extendShape;\nexports.extendPath = extendPath;\nexports.makePath = makePath;\nexports.makeImage = makeImage;\nexports.mergePath = mergePath;\nexports.resizePath = resizePath;\nexports.subPixelOptimizeLine = subPixelOptimizeLine;\nexports.subPixelOptimizeRect = subPixelOptimizeRect;\nexports.subPixelOptimize = subPixelOptimize;\nexports.setHoverStyle = setHoverStyle;\nexports.setLabelStyle = setLabelStyle;\nexports.setTextStyle = setTextStyle;\nexports.setText = setText;\nexports.getFont = getFont;\nexports.updateProps = updateProps;\nexports.initProps = initProps;\nexports.getTransform = getTransform;\nexports.applyTransform = applyTransform;\nexports.transformDirection = transformDirection;\nexports.groupTransition = groupTransition;\nexports.clipPointsByRect = clipPointsByRect;\nexports.clipRectByRect = clipRectByRect;\nexports.createIcon = createIcon;","map":{"version":3,"names":["zrUtil","require","pathTool","colorTool","matrix","vector","Path","Transformable","ZImage","exports","Image","Group","Text","Circle","Sector","Ring","Polygon","Polyline","Rect","Line","BezierCurve","Arc","CompoundPath","LinearGradient","RadialGradient","BoundingRect","IncrementalDisplayable","round","Math","mathMax","max","mathMin","min","EMPTY_OBJ","extendShape","opts","extend","extendPath","pathData","extendFromString","makePath","rect","layout","path","createFromString","boundingRect","getBoundingRect","centerGraphic","resizePath","makeImage","imageUrl","style","image","x","y","width","height","onload","img","setStyle","aspect","cx","cy","mergePath","applyTransform","pathRect","m","calculateTransform","subPixelOptimizeLine","param","shape","lineWidth","x1","x2","subPixelOptimize","y1","y2","subPixelOptimizeRect","originX","originY","originWidth","originHeight","position","positiveOrNegative","doubledPosition","hasFillOrStroke","fillOrStroke","liftColor","color","lift","cacheElementStl","el","__hoverStlDirty","stroke","fill","hoverStyle","__hoverStl","normalStyle","name","__normalStl","doSingleEnterHover","__isHover","useHoverLayer","__zr","addHover","insideRollbackOpt","rollbackInsideStyle","extendFrom","applyInsideStyle","insideOriginalTextPosition","textFill","autoColor","dirty","z2","doSingleLeaveHover","normalStl","removeHover","doEnterHover","type","traverse","child","doLeaveHover","setElementHoverStl","hoverStl","onElementMouseOver","e","__hoverSilentOnTouch","zrByTouch","__isEmphasis","onElementMouseOut","enterEmphasis","leaveEmphasis","setHoverStyle","opt","hoverSilentOnTouch","on","setLabelStyle","emphasisStyle","normalModel","emphasisModel","normalSpecified","emphasisSpecified","labelFetcher","labelDataIndex","labelDimIndex","showNormal","getShallow","showEmphasis","baseText","getFormattedLabel","isFunction","defaultText","normalStyleText","emphasisStyleText","retrieve2","setTextStyle","text","textStyle","textStyleModel","specifiedTextStyle","isEmphasis","setTextStyleCommon","host","setText","labelModel","defaultColor","isRectText","textPosition","textOffset","labelRotate","PI","textRotation","textDistance","ecModel","globalTextStyle","option","richItemNames","getRichItemNames","richResult","hasOwnProperty","richTextStyle","getModel","setTokenTextStyle","rich","forceRich","richItemNameMap","parentModel","isBlock","getAutoColor","textStroke","textBorderColor","textStrokeWidth","textBorderWidth","originalTextPosition","insideRollback","fontStyle","fontWeight","fontSize","fontFamily","textAlign","textVerticalAlign","textLineHeight","textWidth","textHeight","textTag","disableBox","textBackgroundColor","textPadding","textBorderRadius","textBoxShadowColor","textBoxShadowBlur","textBoxShadowOffsetX","textBoxShadowOffsetY","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY","useInsideStyle","indexOf","getFont","gTextStyleModel","trim","join","animateOrSetProps","isUpdate","props","animatableModel","dataIndex","cb","animationEnabled","isAnimationEnabled","postfix","duration","animationEasing","animationDelay","getAnimationDelayParams","animateTo","stopAnimation","attr","updateProps","initProps","getTransform","target","ancestor","mat","identity","mul","getLocalTransform","parent","transform","invert","isArrayLike","transformDirection","direction","hBase","abs","vBase","vertex","groupTransition","g1","g2","getElMap","g","elMap","isGroup","anid","getAnimatableProps","obj","clone","rotation","elMap1","oldEl","newProp","clipPointsByRect","points","map","point","clipRectByRect","targetRect","createIcon","iconStr","rectHover","strokeNoScale","slice","defaults","replace"],"sources":["C:/Users/W/Desktop/vue_map/node_modules/echarts/lib/util/graphic.js"],"sourcesContent":["var zrUtil = require(\"zrender/lib/core/util\");\n\nvar pathTool = require(\"zrender/lib/tool/path\");\n\nvar colorTool = require(\"zrender/lib/tool/color\");\n\nvar matrix = require(\"zrender/lib/core/matrix\");\n\nvar vector = require(\"zrender/lib/core/vector\");\n\nvar Path = require(\"zrender/lib/graphic/Path\");\n\nvar Transformable = require(\"zrender/lib/mixin/Transformable\");\n\nvar ZImage = require(\"zrender/lib/graphic/Image\");\n\nexports.Image = ZImage;\n\nvar Group = require(\"zrender/lib/container/Group\");\n\nexports.Group = Group;\n\nvar Text = require(\"zrender/lib/graphic/Text\");\n\nexports.Text = Text;\n\nvar Circle = require(\"zrender/lib/graphic/shape/Circle\");\n\nexports.Circle = Circle;\n\nvar Sector = require(\"zrender/lib/graphic/shape/Sector\");\n\nexports.Sector = Sector;\n\nvar Ring = require(\"zrender/lib/graphic/shape/Ring\");\n\nexports.Ring = Ring;\n\nvar Polygon = require(\"zrender/lib/graphic/shape/Polygon\");\n\nexports.Polygon = Polygon;\n\nvar Polyline = require(\"zrender/lib/graphic/shape/Polyline\");\n\nexports.Polyline = Polyline;\n\nvar Rect = require(\"zrender/lib/graphic/shape/Rect\");\n\nexports.Rect = Rect;\n\nvar Line = require(\"zrender/lib/graphic/shape/Line\");\n\nexports.Line = Line;\n\nvar BezierCurve = require(\"zrender/lib/graphic/shape/BezierCurve\");\n\nexports.BezierCurve = BezierCurve;\n\nvar Arc = require(\"zrender/lib/graphic/shape/Arc\");\n\nexports.Arc = Arc;\n\nvar CompoundPath = require(\"zrender/lib/graphic/CompoundPath\");\n\nexports.CompoundPath = CompoundPath;\n\nvar LinearGradient = require(\"zrender/lib/graphic/LinearGradient\");\n\nexports.LinearGradient = LinearGradient;\n\nvar RadialGradient = require(\"zrender/lib/graphic/RadialGradient\");\n\nexports.RadialGradient = RadialGradient;\n\nvar BoundingRect = require(\"zrender/lib/core/BoundingRect\");\n\nexports.BoundingRect = BoundingRect;\n\nvar IncrementalDisplayable = require(\"zrender/lib/graphic/IncrementalDisplayable\");\n\nexports.IncrementalDisplayable = IncrementalDisplayable;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar round = Math.round;\nvar mathMax = Math.max;\nvar mathMin = Math.min;\nvar EMPTY_OBJ = {};\n/**\n * Extend shape with parameters\n */\n\nfunction extendShape(opts) {\n  return Path.extend(opts);\n}\n/**\n * Extend path\n */\n\n\nfunction extendPath(pathData, opts) {\n  return pathTool.extendFromString(pathData, opts);\n}\n/**\n * Create a path element from path data string\n * @param {string} pathData\n * @param {Object} opts\n * @param {module:zrender/core/BoundingRect} rect\n * @param {string} [layout=cover] 'center' or 'cover'\n */\n\n\nfunction makePath(pathData, opts, rect, layout) {\n  var path = pathTool.createFromString(pathData, opts);\n  var boundingRect = path.getBoundingRect();\n\n  if (rect) {\n    if (layout === 'center') {\n      rect = centerGraphic(rect, boundingRect);\n    }\n\n    resizePath(path, rect);\n  }\n\n  return path;\n}\n/**\n * Create a image element from image url\n * @param {string} imageUrl image url\n * @param {Object} opts options\n * @param {module:zrender/core/BoundingRect} rect constrain rect\n * @param {string} [layout=cover] 'center' or 'cover'\n */\n\n\nfunction makeImage(imageUrl, rect, layout) {\n  var path = new ZImage({\n    style: {\n      image: imageUrl,\n      x: rect.x,\n      y: rect.y,\n      width: rect.width,\n      height: rect.height\n    },\n    onload: function (img) {\n      if (layout === 'center') {\n        var boundingRect = {\n          width: img.width,\n          height: img.height\n        };\n        path.setStyle(centerGraphic(rect, boundingRect));\n      }\n    }\n  });\n  return path;\n}\n/**\n * Get position of centered element in bounding box.\n *\n * @param  {Object} rect         element local bounding box\n * @param  {Object} boundingRect constraint bounding box\n * @return {Object} element position containing x, y, width, and height\n */\n\n\nfunction centerGraphic(rect, boundingRect) {\n  // Set rect to center, keep width / height ratio.\n  var aspect = boundingRect.width / boundingRect.height;\n  var width = rect.height * aspect;\n  var height;\n\n  if (width <= rect.width) {\n    height = rect.height;\n  } else {\n    width = rect.width;\n    height = width / aspect;\n  }\n\n  var cx = rect.x + rect.width / 2;\n  var cy = rect.y + rect.height / 2;\n  return {\n    x: cx - width / 2,\n    y: cy - height / 2,\n    width: width,\n    height: height\n  };\n}\n\nvar mergePath = pathTool.mergePath;\n/**\n * Resize a path to fit the rect\n * @param {module:zrender/graphic/Path} path\n * @param {Object} rect\n */\n\nfunction resizePath(path, rect) {\n  if (!path.applyTransform) {\n    return;\n  }\n\n  var pathRect = path.getBoundingRect();\n  var m = pathRect.calculateTransform(rect);\n  path.applyTransform(m);\n}\n/**\n * Sub pixel optimize line for canvas\n *\n * @param {Object} param\n * @param {Object} [param.shape]\n * @param {number} [param.shape.x1]\n * @param {number} [param.shape.y1]\n * @param {number} [param.shape.x2]\n * @param {number} [param.shape.y2]\n * @param {Object} [param.style]\n * @param {number} [param.style.lineWidth]\n * @return {Object} Modified param\n */\n\n\nfunction subPixelOptimizeLine(param) {\n  var shape = param.shape;\n  var lineWidth = param.style.lineWidth;\n\n  if (round(shape.x1 * 2) === round(shape.x2 * 2)) {\n    shape.x1 = shape.x2 = subPixelOptimize(shape.x1, lineWidth, true);\n  }\n\n  if (round(shape.y1 * 2) === round(shape.y2 * 2)) {\n    shape.y1 = shape.y2 = subPixelOptimize(shape.y1, lineWidth, true);\n  }\n\n  return param;\n}\n/**\n * Sub pixel optimize rect for canvas\n *\n * @param {Object} param\n * @param {Object} [param.shape]\n * @param {number} [param.shape.x]\n * @param {number} [param.shape.y]\n * @param {number} [param.shape.width]\n * @param {number} [param.shape.height]\n * @param {Object} [param.style]\n * @param {number} [param.style.lineWidth]\n * @return {Object} Modified param\n */\n\n\nfunction subPixelOptimizeRect(param) {\n  var shape = param.shape;\n  var lineWidth = param.style.lineWidth;\n  var originX = shape.x;\n  var originY = shape.y;\n  var originWidth = shape.width;\n  var originHeight = shape.height;\n  shape.x = subPixelOptimize(shape.x, lineWidth, true);\n  shape.y = subPixelOptimize(shape.y, lineWidth, true);\n  shape.width = Math.max(subPixelOptimize(originX + originWidth, lineWidth, false) - shape.x, originWidth === 0 ? 0 : 1);\n  shape.height = Math.max(subPixelOptimize(originY + originHeight, lineWidth, false) - shape.y, originHeight === 0 ? 0 : 1);\n  return param;\n}\n/**\n * Sub pixel optimize for canvas\n *\n * @param {number} position Coordinate, such as x, y\n * @param {number} lineWidth Should be nonnegative integer.\n * @param {boolean=} positiveOrNegative Default false (negative).\n * @return {number} Optimized position.\n */\n\n\nfunction subPixelOptimize(position, lineWidth, positiveOrNegative) {\n  // Assure that (position + lineWidth / 2) is near integer edge,\n  // otherwise line will be fuzzy in canvas.\n  var doubledPosition = round(position * 2);\n  return (doubledPosition + round(lineWidth)) % 2 === 0 ? doubledPosition / 2 : (doubledPosition + (positiveOrNegative ? 1 : -1)) / 2;\n}\n\nfunction hasFillOrStroke(fillOrStroke) {\n  return fillOrStroke != null && fillOrStroke != 'none';\n}\n\nfunction liftColor(color) {\n  return typeof color === 'string' ? colorTool.lift(color, -0.1) : color;\n}\n/**\n * @private\n */\n\n\nfunction cacheElementStl(el) {\n  if (el.__hoverStlDirty) {\n    var stroke = el.style.stroke;\n    var fill = el.style.fill; // Create hoverStyle on mouseover\n\n    var hoverStyle = el.__hoverStl;\n    hoverStyle.fill = hoverStyle.fill || (hasFillOrStroke(fill) ? liftColor(fill) : null);\n    hoverStyle.stroke = hoverStyle.stroke || (hasFillOrStroke(stroke) ? liftColor(stroke) : null);\n    var normalStyle = {};\n\n    for (var name in hoverStyle) {\n      // See comment in `doSingleEnterHover`.\n      if (hoverStyle[name] != null) {\n        normalStyle[name] = el.style[name];\n      }\n    }\n\n    el.__normalStl = normalStyle;\n    el.__hoverStlDirty = false;\n  }\n}\n/**\n * @private\n */\n\n\nfunction doSingleEnterHover(el) {\n  if (el.__isHover) {\n    return;\n  }\n\n  cacheElementStl(el);\n\n  if (el.useHoverLayer) {\n    el.__zr && el.__zr.addHover(el, el.__hoverStl);\n  } else {\n    var style = el.style;\n    var insideRollbackOpt = style.insideRollbackOpt; // Consider case: only `position: 'top'` is set on emphasis, then text\n    // color should be returned to `autoColor`, rather than remain '#fff'.\n    // So we should rollback then apply again after style merging.\n\n    insideRollbackOpt && rollbackInsideStyle(style); // styles can be:\n    // {\n    //    label: {\n    //        show: false,\n    //        position: 'outside',\n    //        fontSize: 18\n    //    },\n    //    emphasis: {\n    //        label: {\n    //            show: true\n    //        }\n    //    }\n    // },\n    // where properties of `emphasis` may not appear in `normal`. We previously use\n    // module:echarts/util/model#defaultEmphasis to merge `normal` to `emphasis`.\n    // But consider rich text and setOption in merge mode, it is impossible to cover\n    // all properties in merge. So we use merge mode when setting style here, where\n    // only properties that is not `null/undefined` can be set. The disadventage:\n    // null/undefined can not be used to remove style any more in `emphasis`.\n\n    style.extendFrom(el.__hoverStl); // Do not save `insideRollback`.\n\n    if (insideRollbackOpt) {\n      applyInsideStyle(style, style.insideOriginalTextPosition, insideRollbackOpt); // textFill may be rollbacked to null.\n\n      if (style.textFill == null) {\n        style.textFill = insideRollbackOpt.autoColor;\n      }\n    }\n\n    el.dirty(false);\n    el.z2 += 1;\n  }\n\n  el.__isHover = true;\n}\n/**\n * @inner\n */\n\n\nfunction doSingleLeaveHover(el) {\n  if (!el.__isHover) {\n    return;\n  }\n\n  var normalStl = el.__normalStl;\n\n  if (el.useHoverLayer) {\n    el.__zr && el.__zr.removeHover(el);\n  } else {\n    // Consider null/undefined value, should use\n    // `setStyle` but not `extendFrom(stl, true)`.\n    normalStl && el.setStyle(normalStl);\n    el.z2 -= 1;\n  }\n\n  el.__isHover = false;\n}\n/**\n * @inner\n */\n\n\nfunction doEnterHover(el) {\n  el.type === 'group' ? el.traverse(function (child) {\n    if (child.type !== 'group') {\n      doSingleEnterHover(child);\n    }\n  }) : doSingleEnterHover(el);\n}\n\nfunction doLeaveHover(el) {\n  el.type === 'group' ? el.traverse(function (child) {\n    if (child.type !== 'group') {\n      doSingleLeaveHover(child);\n    }\n  }) : doSingleLeaveHover(el);\n}\n/**\n * @inner\n */\n\n\nfunction setElementHoverStl(el, hoverStl) {\n  // If element has sepcified hoverStyle, then use it instead of given hoverStyle\n  // Often used when item group has a label element and it's hoverStyle is different\n  el.__hoverStl = el.hoverStyle || hoverStl || {};\n  el.__hoverStlDirty = true;\n\n  if (el.__isHover) {\n    cacheElementStl(el);\n  }\n}\n/**\n * @inner\n */\n\n\nfunction onElementMouseOver(e) {\n  if (this.__hoverSilentOnTouch && e.zrByTouch) {\n    return;\n  } // Only if element is not in emphasis status\n\n\n  !this.__isEmphasis && doEnterHover(this);\n}\n/**\n * @inner\n */\n\n\nfunction onElementMouseOut(e) {\n  if (this.__hoverSilentOnTouch && e.zrByTouch) {\n    return;\n  } // Only if element is not in emphasis status\n\n\n  !this.__isEmphasis && doLeaveHover(this);\n}\n/**\n * @inner\n */\n\n\nfunction enterEmphasis() {\n  this.__isEmphasis = true;\n  doEnterHover(this);\n}\n/**\n * @inner\n */\n\n\nfunction leaveEmphasis() {\n  this.__isEmphasis = false;\n  doLeaveHover(this);\n}\n/**\n * Set hover style of element.\n * This method can be called repeatly without side-effects.\n * @param {module:zrender/Element} el\n * @param {Object} [hoverStyle]\n * @param {Object} [opt]\n * @param {boolean} [opt.hoverSilentOnTouch=false]\n *        In touch device, mouseover event will be trigger on touchstart event\n *        (see module:zrender/dom/HandlerProxy). By this mechanism, we can\n *        conviniently use hoverStyle when tap on touch screen without additional\n *        code for compatibility.\n *        But if the chart/component has select feature, which usually also use\n *        hoverStyle, there might be conflict between 'select-highlight' and\n *        'hover-highlight' especially when roam is enabled (see geo for example).\n *        In this case, hoverSilentOnTouch should be used to disable hover-highlight\n *        on touch device.\n */\n\n\nfunction setHoverStyle(el, hoverStyle, opt) {\n  el.__hoverSilentOnTouch = opt && opt.hoverSilentOnTouch;\n  el.type === 'group' ? el.traverse(function (child) {\n    if (child.type !== 'group') {\n      setElementHoverStl(child, hoverStyle);\n    }\n  }) : setElementHoverStl(el, hoverStyle); // Duplicated function will be auto-ignored, see Eventful.js.\n\n  el.on('mouseover', onElementMouseOver).on('mouseout', onElementMouseOut); // Emphasis, normal can be triggered manually\n\n  el.on('emphasis', enterEmphasis).on('normal', leaveEmphasis);\n}\n/**\n * @param {Object|module:zrender/graphic/Style} normalStyle\n * @param {Object} emphasisStyle\n * @param {module:echarts/model/Model} normalModel\n * @param {module:echarts/model/Model} emphasisModel\n * @param {Object} opt Check `opt` of `setTextStyleCommon` to find other props.\n * @param {string|Function} [opt.defaultText]\n * @param {module:echarts/model/Model} [opt.labelFetcher] Fetch text by\n *      `opt.labelFetcher.getFormattedLabel(opt.labelDataIndex, 'normal'/'emphasis', null, opt.labelDimIndex)`\n * @param {module:echarts/model/Model} [opt.labelDataIndex] Fetch text by\n *      `opt.textFetcher.getFormattedLabel(opt.labelDataIndex, 'normal'/'emphasis', null, opt.labelDimIndex)`\n * @param {module:echarts/model/Model} [opt.labelDimIndex] Fetch text by\n *      `opt.textFetcher.getFormattedLabel(opt.labelDataIndex, 'normal'/'emphasis', null, opt.labelDimIndex)`\n * @param {Object} [normalSpecified]\n * @param {Object} [emphasisSpecified]\n */\n\n\nfunction setLabelStyle(normalStyle, emphasisStyle, normalModel, emphasisModel, opt, normalSpecified, emphasisSpecified) {\n  opt = opt || EMPTY_OBJ;\n  var labelFetcher = opt.labelFetcher;\n  var labelDataIndex = opt.labelDataIndex;\n  var labelDimIndex = opt.labelDimIndex; // This scenario, `label.normal.show = true; label.emphasis.show = false`,\n  // is not supported util someone requests.\n\n  var showNormal = normalModel.getShallow('show');\n  var showEmphasis = emphasisModel.getShallow('show'); // Consider performance, only fetch label when necessary.\n  // If `normal.show` is `false` and `emphasis.show` is `true` and `emphasis.formatter` is not set,\n  // label should be displayed, where text is fetched by `normal.formatter` or `opt.defaultText`.\n\n  var baseText;\n\n  if (showNormal || showEmphasis) {\n    if (labelFetcher) {\n      baseText = labelFetcher.getFormattedLabel(labelDataIndex, 'normal', null, labelDimIndex);\n    }\n\n    if (baseText == null) {\n      baseText = zrUtil.isFunction(opt.defaultText) ? opt.defaultText(labelDataIndex, opt) : opt.defaultText;\n    }\n  }\n\n  var normalStyleText = showNormal ? baseText : null;\n  var emphasisStyleText = showEmphasis ? zrUtil.retrieve2(labelFetcher ? labelFetcher.getFormattedLabel(labelDataIndex, 'emphasis', null, labelDimIndex) : null, baseText) : null; // Optimize: If style.text is null, text will not be drawn.\n\n  if (normalStyleText != null || emphasisStyleText != null) {\n    // Always set `textStyle` even if `normalStyle.text` is null, because default\n    // values have to be set on `normalStyle`.\n    // If we set default values on `emphasisStyle`, consider case:\n    // Firstly, `setOption(... label: {normal: {text: null}, emphasis: {show: true}} ...);`\n    // Secondly, `setOption(... label: {noraml: {show: true, text: 'abc', color: 'red'} ...);`\n    // Then the 'red' will not work on emphasis.\n    setTextStyle(normalStyle, normalModel, normalSpecified, opt);\n    setTextStyle(emphasisStyle, emphasisModel, emphasisSpecified, opt, true);\n  }\n\n  normalStyle.text = normalStyleText;\n  emphasisStyle.text = emphasisStyleText;\n}\n/**\n * Set basic textStyle properties.\n * @param {Object|module:zrender/graphic/Style} textStyle\n * @param {module:echarts/model/Model} model\n * @param {Object} [specifiedTextStyle] Can be overrided by settings in model.\n * @param {Object} [opt] See `opt` of `setTextStyleCommon`.\n * @param {boolean} [isEmphasis]\n */\n\n\nfunction setTextStyle(textStyle, textStyleModel, specifiedTextStyle, opt, isEmphasis) {\n  setTextStyleCommon(textStyle, textStyleModel, opt, isEmphasis);\n  specifiedTextStyle && zrUtil.extend(textStyle, specifiedTextStyle);\n  textStyle.host && textStyle.host.dirty && textStyle.host.dirty(false);\n  return textStyle;\n}\n/**\n * Set text option in the style.\n * @deprecated\n * @param {Object} textStyle\n * @param {module:echarts/model/Model} labelModel\n * @param {string|boolean} defaultColor Default text color.\n *        If set as false, it will be processed as a emphasis style.\n */\n\n\nfunction setText(textStyle, labelModel, defaultColor) {\n  var opt = {\n    isRectText: true\n  };\n  var isEmphasis;\n\n  if (defaultColor === false) {\n    isEmphasis = true;\n  } else {\n    // Support setting color as 'auto' to get visual color.\n    opt.autoColor = defaultColor;\n  }\n\n  setTextStyleCommon(textStyle, labelModel, opt, isEmphasis);\n  textStyle.host && textStyle.host.dirty && textStyle.host.dirty(false);\n}\n/**\n * {\n *      disableBox: boolean, Whether diable drawing box of block (outer most).\n *      isRectText: boolean,\n *      autoColor: string, specify a color when color is 'auto',\n *              for textFill, textStroke, textBackgroundColor, and textBorderColor.\n *              If autoColor specified, it is used as default textFill.\n *      useInsideStyle:\n *              `true`: Use inside style (textFill, textStroke, textStrokeWidth)\n *                  if `textFill` is not specified.\n *              `false`: Do not use inside style.\n *              `null/undefined`: use inside style if `isRectText` is true and\n *                  `textFill` is not specified and textPosition contains `'inside'`.\n *      forceRich: boolean\n * }\n */\n\n\nfunction setTextStyleCommon(textStyle, textStyleModel, opt, isEmphasis) {\n  // Consider there will be abnormal when merge hover style to normal style if given default value.\n  opt = opt || EMPTY_OBJ;\n\n  if (opt.isRectText) {\n    var textPosition = textStyleModel.getShallow('position') || (isEmphasis ? null : 'inside'); // 'outside' is not a valid zr textPostion value, but used\n    // in bar series, and magric type should be considered.\n\n    textPosition === 'outside' && (textPosition = 'top');\n    textStyle.textPosition = textPosition;\n    textStyle.textOffset = textStyleModel.getShallow('offset');\n    var labelRotate = textStyleModel.getShallow('rotate');\n    labelRotate != null && (labelRotate *= Math.PI / 180);\n    textStyle.textRotation = labelRotate;\n    textStyle.textDistance = zrUtil.retrieve2(textStyleModel.getShallow('distance'), isEmphasis ? null : 5);\n  }\n\n  var ecModel = textStyleModel.ecModel;\n  var globalTextStyle = ecModel && ecModel.option.textStyle; // Consider case:\n  // {\n  //     data: [{\n  //         value: 12,\n  //         label: {\n  //             rich: {\n  //                 // no 'a' here but using parent 'a'.\n  //             }\n  //         }\n  //     }],\n  //     rich: {\n  //         a: { ... }\n  //     }\n  // }\n\n  var richItemNames = getRichItemNames(textStyleModel);\n  var richResult;\n\n  if (richItemNames) {\n    richResult = {};\n\n    for (var name in richItemNames) {\n      if (richItemNames.hasOwnProperty(name)) {\n        // Cascade is supported in rich.\n        var richTextStyle = textStyleModel.getModel(['rich', name]); // In rich, never `disableBox`.\n\n        setTokenTextStyle(richResult[name] = {}, richTextStyle, globalTextStyle, opt, isEmphasis);\n      }\n    }\n  }\n\n  textStyle.rich = richResult;\n  setTokenTextStyle(textStyle, textStyleModel, globalTextStyle, opt, isEmphasis, true);\n\n  if (opt.forceRich && !opt.textStyle) {\n    opt.textStyle = {};\n  }\n\n  return textStyle;\n} // Consider case:\n// {\n//     data: [{\n//         value: 12,\n//         label: {\n//             rich: {\n//                 // no 'a' here but using parent 'a'.\n//             }\n//         }\n//     }],\n//     rich: {\n//         a: { ... }\n//     }\n// }\n\n\nfunction getRichItemNames(textStyleModel) {\n  // Use object to remove duplicated names.\n  var richItemNameMap;\n\n  while (textStyleModel && textStyleModel !== textStyleModel.ecModel) {\n    var rich = (textStyleModel.option || EMPTY_OBJ).rich;\n\n    if (rich) {\n      richItemNameMap = richItemNameMap || {};\n\n      for (var name in rich) {\n        if (rich.hasOwnProperty(name)) {\n          richItemNameMap[name] = 1;\n        }\n      }\n    }\n\n    textStyleModel = textStyleModel.parentModel;\n  }\n\n  return richItemNameMap;\n}\n\nfunction setTokenTextStyle(textStyle, textStyleModel, globalTextStyle, opt, isEmphasis, isBlock) {\n  // In merge mode, default value should not be given.\n  globalTextStyle = !isEmphasis && globalTextStyle || EMPTY_OBJ;\n  textStyle.textFill = getAutoColor(textStyleModel.getShallow('color'), opt) || globalTextStyle.color;\n  textStyle.textStroke = getAutoColor(textStyleModel.getShallow('textBorderColor'), opt) || globalTextStyle.textBorderColor;\n  textStyle.textStrokeWidth = zrUtil.retrieve2(textStyleModel.getShallow('textBorderWidth'), globalTextStyle.textBorderWidth);\n\n  if (!isEmphasis) {\n    if (isBlock) {\n      // Always set `insideRollback`, for clearing previous.\n      var originalTextPosition = textStyle.textPosition;\n      textStyle.insideRollback = applyInsideStyle(textStyle, originalTextPosition, opt); // Save original textPosition, because style.textPosition will be repalced by\n      // real location (like [10, 30]) in zrender.\n\n      textStyle.insideOriginalTextPosition = originalTextPosition;\n      textStyle.insideRollbackOpt = opt;\n    } // Set default finally.\n\n\n    if (textStyle.textFill == null) {\n      textStyle.textFill = opt.autoColor;\n    }\n  } // Do not use `getFont` here, because merge should be supported, where\n  // part of these properties may be changed in emphasis style, and the\n  // others should remain their original value got from normal style.\n\n\n  textStyle.fontStyle = textStyleModel.getShallow('fontStyle') || globalTextStyle.fontStyle;\n  textStyle.fontWeight = textStyleModel.getShallow('fontWeight') || globalTextStyle.fontWeight;\n  textStyle.fontSize = textStyleModel.getShallow('fontSize') || globalTextStyle.fontSize;\n  textStyle.fontFamily = textStyleModel.getShallow('fontFamily') || globalTextStyle.fontFamily;\n  textStyle.textAlign = textStyleModel.getShallow('align');\n  textStyle.textVerticalAlign = textStyleModel.getShallow('verticalAlign') || textStyleModel.getShallow('baseline');\n  textStyle.textLineHeight = textStyleModel.getShallow('lineHeight');\n  textStyle.textWidth = textStyleModel.getShallow('width');\n  textStyle.textHeight = textStyleModel.getShallow('height');\n  textStyle.textTag = textStyleModel.getShallow('tag');\n\n  if (!isBlock || !opt.disableBox) {\n    textStyle.textBackgroundColor = getAutoColor(textStyleModel.getShallow('backgroundColor'), opt);\n    textStyle.textPadding = textStyleModel.getShallow('padding');\n    textStyle.textBorderColor = getAutoColor(textStyleModel.getShallow('borderColor'), opt);\n    textStyle.textBorderWidth = textStyleModel.getShallow('borderWidth');\n    textStyle.textBorderRadius = textStyleModel.getShallow('borderRadius');\n    textStyle.textBoxShadowColor = textStyleModel.getShallow('shadowColor');\n    textStyle.textBoxShadowBlur = textStyleModel.getShallow('shadowBlur');\n    textStyle.textBoxShadowOffsetX = textStyleModel.getShallow('shadowOffsetX');\n    textStyle.textBoxShadowOffsetY = textStyleModel.getShallow('shadowOffsetY');\n  }\n\n  textStyle.textShadowColor = textStyleModel.getShallow('textShadowColor') || globalTextStyle.textShadowColor;\n  textStyle.textShadowBlur = textStyleModel.getShallow('textShadowBlur') || globalTextStyle.textShadowBlur;\n  textStyle.textShadowOffsetX = textStyleModel.getShallow('textShadowOffsetX') || globalTextStyle.textShadowOffsetX;\n  textStyle.textShadowOffsetY = textStyleModel.getShallow('textShadowOffsetY') || globalTextStyle.textShadowOffsetY;\n}\n\nfunction getAutoColor(color, opt) {\n  return color !== 'auto' ? color : opt && opt.autoColor ? opt.autoColor : null;\n}\n\nfunction applyInsideStyle(textStyle, textPosition, opt) {\n  var useInsideStyle = opt.useInsideStyle;\n  var insideRollback;\n\n  if (textStyle.textFill == null && useInsideStyle !== false && (useInsideStyle === true || opt.isRectText && textPosition // textPosition can be [10, 30]\n  && typeof textPosition === 'string' && textPosition.indexOf('inside') >= 0)) {\n    insideRollback = {\n      textFill: null,\n      textStroke: textStyle.textStroke,\n      textStrokeWidth: textStyle.textStrokeWidth\n    };\n    textStyle.textFill = '#fff'; // Consider text with #fff overflow its container.\n\n    if (textStyle.textStroke == null) {\n      textStyle.textStroke = opt.autoColor;\n      textStyle.textStrokeWidth == null && (textStyle.textStrokeWidth = 2);\n    }\n  }\n\n  return insideRollback;\n}\n\nfunction rollbackInsideStyle(style) {\n  var insideRollback = style.insideRollback;\n\n  if (insideRollback) {\n    style.textFill = insideRollback.textFill;\n    style.textStroke = insideRollback.textStroke;\n    style.textStrokeWidth = insideRollback.textStrokeWidth;\n  }\n}\n\nfunction getFont(opt, ecModel) {\n  // ecModel or default text style model.\n  var gTextStyleModel = ecModel || ecModel.getModel('textStyle');\n  return zrUtil.trim([// FIXME in node-canvas fontWeight is before fontStyle\n  opt.fontStyle || gTextStyleModel && gTextStyleModel.getShallow('fontStyle') || '', opt.fontWeight || gTextStyleModel && gTextStyleModel.getShallow('fontWeight') || '', (opt.fontSize || gTextStyleModel && gTextStyleModel.getShallow('fontSize') || 12) + 'px', opt.fontFamily || gTextStyleModel && gTextStyleModel.getShallow('fontFamily') || 'sans-serif'].join(' '));\n}\n\nfunction animateOrSetProps(isUpdate, el, props, animatableModel, dataIndex, cb) {\n  if (typeof dataIndex === 'function') {\n    cb = dataIndex;\n    dataIndex = null;\n  } // Do not check 'animation' property directly here. Consider this case:\n  // animation model is an `itemModel`, whose does not have `isAnimationEnabled`\n  // but its parent model (`seriesModel`) does.\n\n\n  var animationEnabled = animatableModel && animatableModel.isAnimationEnabled();\n\n  if (animationEnabled) {\n    var postfix = isUpdate ? 'Update' : '';\n    var duration = animatableModel.getShallow('animationDuration' + postfix);\n    var animationEasing = animatableModel.getShallow('animationEasing' + postfix);\n    var animationDelay = animatableModel.getShallow('animationDelay' + postfix);\n\n    if (typeof animationDelay === 'function') {\n      animationDelay = animationDelay(dataIndex, animatableModel.getAnimationDelayParams ? animatableModel.getAnimationDelayParams(el, dataIndex) : null);\n    }\n\n    if (typeof duration === 'function') {\n      duration = duration(dataIndex);\n    }\n\n    duration > 0 ? el.animateTo(props, duration, animationDelay || 0, animationEasing, cb, !!cb) : (el.stopAnimation(), el.attr(props), cb && cb());\n  } else {\n    el.stopAnimation();\n    el.attr(props);\n    cb && cb();\n  }\n}\n/**\n * Update graphic element properties with or without animation according to the\n * configuration in series.\n *\n * Caution: this method will stop previous animation.\n * So if do not use this method to one element twice before\n * animation starts, unless you know what you are doing.\n *\n * @param {module:zrender/Element} el\n * @param {Object} props\n * @param {module:echarts/model/Model} [animatableModel]\n * @param {number} [dataIndex]\n * @param {Function} [cb]\n * @example\n *     graphic.updateProps(el, {\n *         position: [100, 100]\n *     }, seriesModel, dataIndex, function () { console.log('Animation done!'); });\n *     // Or\n *     graphic.updateProps(el, {\n *         position: [100, 100]\n *     }, seriesModel, function () { console.log('Animation done!'); });\n */\n\n\nfunction updateProps(el, props, animatableModel, dataIndex, cb) {\n  animateOrSetProps(true, el, props, animatableModel, dataIndex, cb);\n}\n/**\n * Init graphic element properties with or without animation according to the\n * configuration in series.\n *\n * Caution: this method will stop previous animation.\n * So if do not use this method to one element twice before\n * animation starts, unless you know what you are doing.\n *\n * @param {module:zrender/Element} el\n * @param {Object} props\n * @param {module:echarts/model/Model} [animatableModel]\n * @param {number} [dataIndex]\n * @param {Function} cb\n */\n\n\nfunction initProps(el, props, animatableModel, dataIndex, cb) {\n  animateOrSetProps(false, el, props, animatableModel, dataIndex, cb);\n}\n/**\n * Get transform matrix of target (param target),\n * in coordinate of its ancestor (param ancestor)\n *\n * @param {module:zrender/mixin/Transformable} target\n * @param {module:zrender/mixin/Transformable} [ancestor]\n */\n\n\nfunction getTransform(target, ancestor) {\n  var mat = matrix.identity([]);\n\n  while (target && target !== ancestor) {\n    matrix.mul(mat, target.getLocalTransform(), mat);\n    target = target.parent;\n  }\n\n  return mat;\n}\n/**\n * Apply transform to an vertex.\n * @param {Array.<number>} target [x, y]\n * @param {Array.<number>|TypedArray.<number>|Object} transform Can be:\n *      + Transform matrix: like [1, 0, 0, 1, 0, 0]\n *      + {position, rotation, scale}, the same as `zrender/Transformable`.\n * @param {boolean=} invert Whether use invert matrix.\n * @return {Array.<number>} [x, y]\n */\n\n\nfunction applyTransform(target, transform, invert) {\n  if (transform && !zrUtil.isArrayLike(transform)) {\n    transform = Transformable.getLocalTransform(transform);\n  }\n\n  if (invert) {\n    transform = matrix.invert([], transform);\n  }\n\n  return vector.applyTransform([], target, transform);\n}\n/**\n * @param {string} direction 'left' 'right' 'top' 'bottom'\n * @param {Array.<number>} transform Transform matrix: like [1, 0, 0, 1, 0, 0]\n * @param {boolean=} invert Whether use invert matrix.\n * @return {string} Transformed direction. 'left' 'right' 'top' 'bottom'\n */\n\n\nfunction transformDirection(direction, transform, invert) {\n  // Pick a base, ensure that transform result will not be (0, 0).\n  var hBase = transform[4] === 0 || transform[5] === 0 || transform[0] === 0 ? 1 : Math.abs(2 * transform[4] / transform[0]);\n  var vBase = transform[4] === 0 || transform[5] === 0 || transform[2] === 0 ? 1 : Math.abs(2 * transform[4] / transform[2]);\n  var vertex = [direction === 'left' ? -hBase : direction === 'right' ? hBase : 0, direction === 'top' ? -vBase : direction === 'bottom' ? vBase : 0];\n  vertex = applyTransform(vertex, transform, invert);\n  return Math.abs(vertex[0]) > Math.abs(vertex[1]) ? vertex[0] > 0 ? 'right' : 'left' : vertex[1] > 0 ? 'bottom' : 'top';\n}\n/**\n * Apply group transition animation from g1 to g2.\n * If no animatableModel, no animation.\n */\n\n\nfunction groupTransition(g1, g2, animatableModel, cb) {\n  if (!g1 || !g2) {\n    return;\n  }\n\n  function getElMap(g) {\n    var elMap = {};\n    g.traverse(function (el) {\n      if (!el.isGroup && el.anid) {\n        elMap[el.anid] = el;\n      }\n    });\n    return elMap;\n  }\n\n  function getAnimatableProps(el) {\n    var obj = {\n      position: vector.clone(el.position),\n      rotation: el.rotation\n    };\n\n    if (el.shape) {\n      obj.shape = zrUtil.extend({}, el.shape);\n    }\n\n    return obj;\n  }\n\n  var elMap1 = getElMap(g1);\n  g2.traverse(function (el) {\n    if (!el.isGroup && el.anid) {\n      var oldEl = elMap1[el.anid];\n\n      if (oldEl) {\n        var newProp = getAnimatableProps(el);\n        el.attr(getAnimatableProps(oldEl));\n        updateProps(el, newProp, animatableModel, el.dataIndex);\n      } // else {\n      //     if (el.previousProps) {\n      //         graphic.updateProps\n      //     }\n      // }\n\n    }\n  });\n}\n/**\n * @param {Array.<Array.<number>>} points Like: [[23, 44], [53, 66], ...]\n * @param {Object} rect {x, y, width, height}\n * @return {Array.<Array.<number>>} A new clipped points.\n */\n\n\nfunction clipPointsByRect(points, rect) {\n  return zrUtil.map(points, function (point) {\n    var x = point[0];\n    x = mathMax(x, rect.x);\n    x = mathMin(x, rect.x + rect.width);\n    var y = point[1];\n    y = mathMax(y, rect.y);\n    y = mathMin(y, rect.y + rect.height);\n    return [x, y];\n  });\n}\n/**\n * @param {Object} targetRect {x, y, width, height}\n * @param {Object} rect {x, y, width, height}\n * @return {Object} A new clipped rect. If rect size are negative, return undefined.\n */\n\n\nfunction clipRectByRect(targetRect, rect) {\n  var x = mathMax(targetRect.x, rect.x);\n  var x2 = mathMin(targetRect.x + targetRect.width, rect.x + rect.width);\n  var y = mathMax(targetRect.y, rect.y);\n  var y2 = mathMin(targetRect.y + targetRect.height, rect.y + rect.height);\n\n  if (x2 >= x && y2 >= y) {\n    return {\n      x: x,\n      y: y,\n      width: x2 - x,\n      height: y2 - y\n    };\n  }\n}\n/**\n * @param {string} iconStr Support 'image://' or 'path://' or direct svg path.\n * @param {Object} [opt] Properties of `module:zrender/Element`, except `style`.\n * @param {Object} [rect] {x, y, width, height}\n * @return {module:zrender/Element} Icon path or image element.\n */\n\n\nfunction createIcon(iconStr, opt, rect) {\n  opt = zrUtil.extend({\n    rectHover: true\n  }, opt);\n  var style = opt.style = {\n    strokeNoScale: true\n  };\n  rect = rect || {\n    x: -1,\n    y: -1,\n    width: 2,\n    height: 2\n  };\n\n  if (iconStr) {\n    return iconStr.indexOf('image://') === 0 ? (style.image = iconStr.slice(8), zrUtil.defaults(style, rect), new ZImage(opt)) : makePath(iconStr.replace('path://', ''), opt, rect, 'center');\n  }\n}\n\nexports.extendShape = extendShape;\nexports.extendPath = extendPath;\nexports.makePath = makePath;\nexports.makeImage = makeImage;\nexports.mergePath = mergePath;\nexports.resizePath = resizePath;\nexports.subPixelOptimizeLine = subPixelOptimizeLine;\nexports.subPixelOptimizeRect = subPixelOptimizeRect;\nexports.subPixelOptimize = subPixelOptimize;\nexports.setHoverStyle = setHoverStyle;\nexports.setLabelStyle = setLabelStyle;\nexports.setTextStyle = setTextStyle;\nexports.setText = setText;\nexports.getFont = getFont;\nexports.updateProps = updateProps;\nexports.initProps = initProps;\nexports.getTransform = getTransform;\nexports.applyTransform = applyTransform;\nexports.transformDirection = transformDirection;\nexports.groupTransition = groupTransition;\nexports.clipPointsByRect = clipPointsByRect;\nexports.clipRectByRect = clipRectByRect;\nexports.createIcon = createIcon;"],"mappings":"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"},"metadata":{},"sourceType":"script"}