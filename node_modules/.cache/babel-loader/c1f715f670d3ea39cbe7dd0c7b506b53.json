{"ast":null,"code":"var vec2 = require(\"zrender/lib/core/vector\");\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\nfunction circularLayout(seriesModel) {\n  var coordSys = seriesModel.coordinateSystem;\n\n  if (coordSys && coordSys.type !== 'view') {\n    return;\n  }\n\n  var rect = coordSys.getBoundingRect();\n  var nodeData = seriesModel.getData();\n  var graph = nodeData.graph;\n  var angle = 0;\n  var sum = nodeData.getSum('value');\n  var unitAngle = Math.PI * 2 / (sum || nodeData.count());\n  var cx = rect.width / 2 + rect.x;\n  var cy = rect.height / 2 + rect.y;\n  var r = Math.min(rect.width, rect.height) / 2;\n  graph.eachNode(function (node) {\n    var value = node.getValue('value');\n    angle += unitAngle * (sum ? value : 1) / 2;\n    node.setLayout([r * Math.cos(angle) + cx, r * Math.sin(angle) + cy]);\n    angle += unitAngle * (sum ? value : 1) / 2;\n  });\n  nodeData.setLayout({\n    cx: cx,\n    cy: cy\n  });\n  graph.eachEdge(function (edge) {\n    var curveness = edge.getModel().get('lineStyle.curveness') || 0;\n    var p1 = vec2.clone(edge.node1.getLayout());\n    var p2 = vec2.clone(edge.node2.getLayout());\n    var cp1;\n    var x12 = (p1[0] + p2[0]) / 2;\n    var y12 = (p1[1] + p2[1]) / 2;\n\n    if (+curveness) {\n      curveness *= 3;\n      cp1 = [cx * curveness + x12 * (1 - curveness), cy * curveness + y12 * (1 - curveness)];\n    }\n\n    edge.setLayout([p1, p2, cp1]);\n  });\n}\n\nexports.circularLayout = circularLayout;","map":{"version":3,"names":["vec2","require","circularLayout","seriesModel","coordSys","coordinateSystem","type","rect","getBoundingRect","nodeData","getData","graph","angle","sum","getSum","unitAngle","Math","PI","count","cx","width","x","cy","height","y","r","min","eachNode","node","value","getValue","setLayout","cos","sin","eachEdge","edge","curveness","getModel","get","p1","clone","node1","getLayout","p2","node2","cp1","x12","y12","exports"],"sources":["C:/Users/W/Desktop/vue_map/node_modules/echarts/lib/chart/graph/circularLayoutHelper.js"],"sourcesContent":["var vec2 = require(\"zrender/lib/core/vector\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nfunction circularLayout(seriesModel) {\n  var coordSys = seriesModel.coordinateSystem;\n\n  if (coordSys && coordSys.type !== 'view') {\n    return;\n  }\n\n  var rect = coordSys.getBoundingRect();\n  var nodeData = seriesModel.getData();\n  var graph = nodeData.graph;\n  var angle = 0;\n  var sum = nodeData.getSum('value');\n  var unitAngle = Math.PI * 2 / (sum || nodeData.count());\n  var cx = rect.width / 2 + rect.x;\n  var cy = rect.height / 2 + rect.y;\n  var r = Math.min(rect.width, rect.height) / 2;\n  graph.eachNode(function (node) {\n    var value = node.getValue('value');\n    angle += unitAngle * (sum ? value : 1) / 2;\n    node.setLayout([r * Math.cos(angle) + cx, r * Math.sin(angle) + cy]);\n    angle += unitAngle * (sum ? value : 1) / 2;\n  });\n  nodeData.setLayout({\n    cx: cx,\n    cy: cy\n  });\n  graph.eachEdge(function (edge) {\n    var curveness = edge.getModel().get('lineStyle.curveness') || 0;\n    var p1 = vec2.clone(edge.node1.getLayout());\n    var p2 = vec2.clone(edge.node2.getLayout());\n    var cp1;\n    var x12 = (p1[0] + p2[0]) / 2;\n    var y12 = (p1[1] + p2[1]) / 2;\n\n    if (+curveness) {\n      curveness *= 3;\n      cp1 = [cx * curveness + x12 * (1 - curveness), cy * curveness + y12 * (1 - curveness)];\n    }\n\n    edge.setLayout([p1, p2, cp1]);\n  });\n}\n\nexports.circularLayout = circularLayout;"],"mappings":"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"},"metadata":{},"sourceType":"script"}