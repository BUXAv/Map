{"ast":null,"code":"var Eventful = require(\"../mixin/Eventful\");\n\nexports.Dispatcher = Eventful;\n\nvar env = require(\"./env\");\n/**\n * 事件辅助类\n * @module zrender/core/event\n * @author Kener (@Kener-林峰, kener.linfeng@gmail.com)\n */\n\n\nvar isDomLevel2 = typeof window !== 'undefined' && !!window.addEventListener;\nvar MOUSE_EVENT_REG = /^(?:mouse|pointer|contextmenu|drag|drop)|click/;\n\nfunction getBoundingClientRect(el) {\n  // BlackBerry 5, iOS 3 (original iPhone) don't have getBoundingRect\n  return el.getBoundingClientRect ? el.getBoundingClientRect() : {\n    left: 0,\n    top: 0\n  };\n} // `calculate` is optional, default false\n\n\nfunction clientToLocal(el, e, out, calculate) {\n  out = out || {}; // According to the W3C Working Draft, offsetX and offsetY should be relative\n  // to the padding edge of the target element. The only browser using this convention\n  // is IE. Webkit uses the border edge, Opera uses the content edge, and FireFox does\n  // not support the properties.\n  // (see http://www.jacklmoore.com/notes/mouse-position/)\n  // In zr painter.dom, padding edge equals to border edge.\n  // FIXME\n  // When mousemove event triggered on ec tooltip, target is not zr painter.dom, and\n  // offsetX/Y is relative to e.target, where the calculation of zrX/Y via offsetX/Y\n  // is too complex. So css-transfrom dont support in this case temporarily.\n\n  if (calculate || !env.canvasSupported) {\n    defaultGetZrXY(el, e, out);\n  } // Caution: In FireFox, layerX/layerY Mouse position relative to the closest positioned\n  // ancestor element, so we should make sure el is positioned (e.g., not position:static).\n  // BTW1, Webkit don't return the same results as FF in non-simple cases (like add\n  // zoom-factor, overflow / opacity layers, transforms ...)\n  // BTW2, (ev.offsetY || ev.pageY - $(ev.target).offset().top) is not correct in preserve-3d.\n  // <https://bugs.jquery.com/ticket/8523#comment:14>\n  // BTW3, In ff, offsetX/offsetY is always 0.\n  else if (env.browser.firefox && e.layerX != null && e.layerX !== e.offsetX) {\n    out.zrX = e.layerX;\n    out.zrY = e.layerY;\n  } // For IE6+, chrome, safari, opera. (When will ff support offsetX?)\n  else if (e.offsetX != null) {\n    out.zrX = e.offsetX;\n    out.zrY = e.offsetY;\n  } // For some other device, e.g., IOS safari.\n  else {\n    defaultGetZrXY(el, e, out);\n  }\n\n  return out;\n}\n\nfunction defaultGetZrXY(el, e, out) {\n  // This well-known method below does not support css transform.\n  var box = getBoundingClientRect(el);\n  out.zrX = e.clientX - box.left;\n  out.zrY = e.clientY - box.top;\n}\n/**\n * 如果存在第三方嵌入的一些dom触发的事件，或touch事件，需要转换一下事件坐标.\n * `calculate` is optional, default false.\n */\n\n\nfunction normalizeEvent(el, e, calculate) {\n  e = e || window.event;\n\n  if (e.zrX != null) {\n    return e;\n  }\n\n  var eventType = e.type;\n  var isTouch = eventType && eventType.indexOf('touch') >= 0;\n\n  if (!isTouch) {\n    clientToLocal(el, e, e, calculate);\n    e.zrDelta = e.wheelDelta ? e.wheelDelta / 120 : -(e.detail || 0) / 3;\n  } else {\n    var touch = eventType != 'touchend' ? e.targetTouches[0] : e.changedTouches[0];\n    touch && clientToLocal(el, touch, e, calculate);\n  } // Add which for click: 1 === left; 2 === middle; 3 === right; otherwise: 0;\n  // See jQuery: https://github.com/jquery/jquery/blob/master/src/event.js\n  // If e.which has been defined, if may be readonly,\n  // see: https://developer.mozilla.org/en-US/docs/Web/API/MouseEvent/which\n\n\n  var button = e.button;\n\n  if (e.which == null && button !== undefined && MOUSE_EVENT_REG.test(e.type)) {\n    e.which = button & 1 ? 1 : button & 2 ? 3 : button & 4 ? 2 : 0;\n  }\n\n  return e;\n}\n/**\n * @param {HTMLElement} el\n * @param {string} name\n * @param {Function} handler\n */\n\n\nfunction addEventListener(el, name, handler) {\n  if (isDomLevel2) {\n    // Reproduct the console warning:\n    // [Violation] Added non-passive event listener to a scroll-blocking <some> event.\n    // Consider marking event handler as 'passive' to make the page more responsive.\n    // Just set console log level: verbose in chrome dev tool.\n    // then the warning log will be printed when addEventListener called.\n    // See https://github.com/WICG/EventListenerOptions/blob/gh-pages/explainer.md\n    // We have not yet found a neat way to using passive. Because in zrender the dom event\n    // listener delegate all of the upper events of element. Some of those events need\n    // to prevent default. For example, the feature `preventDefaultMouseMove` of echarts.\n    // Before passive can be adopted, these issues should be considered:\n    // (1) Whether and how a zrender user specifies an event listener passive. And by default,\n    // passive or not.\n    // (2) How to tread that some zrender event listener is passive, and some is not. If\n    // we use other way but not preventDefault of mousewheel and touchmove, browser\n    // compatibility should be handled.\n    // var opts = (env.passiveSupported && name === 'mousewheel')\n    //     ? {passive: true}\n    //     // By default, the third param of el.addEventListener is `capture: false`.\n    //     : void 0;\n    // el.addEventListener(name, handler /* , opts */);\n    el.addEventListener(name, handler);\n  } else {\n    el.attachEvent('on' + name, handler);\n  }\n}\n\nfunction removeEventListener(el, name, handler) {\n  if (isDomLevel2) {\n    el.removeEventListener(name, handler);\n  } else {\n    el.detachEvent('on' + name, handler);\n  }\n}\n/**\n * preventDefault and stopPropagation.\n * Notice: do not do that in zrender. Upper application\n * do that if necessary.\n *\n * @memberOf module:zrender/core/event\n * @method\n * @param {Event} e : event对象\n */\n\n\nvar stop = isDomLevel2 ? function (e) {\n  e.preventDefault();\n  e.stopPropagation();\n  e.cancelBubble = true;\n} : function (e) {\n  e.returnValue = false;\n  e.cancelBubble = true;\n};\n\nfunction notLeftMouse(e) {\n  // If e.which is undefined, considered as left mouse event.\n  return e.which > 1;\n} // 做向上兼容\n\n\nexports.clientToLocal = clientToLocal;\nexports.normalizeEvent = normalizeEvent;\nexports.addEventListener = addEventListener;\nexports.removeEventListener = removeEventListener;\nexports.stop = stop;\nexports.notLeftMouse = notLeftMouse;","map":{"version":3,"names":["Eventful","require","exports","Dispatcher","env","isDomLevel2","window","addEventListener","MOUSE_EVENT_REG","getBoundingClientRect","el","left","top","clientToLocal","e","out","calculate","canvasSupported","defaultGetZrXY","browser","firefox","layerX","offsetX","zrX","zrY","layerY","offsetY","box","clientX","clientY","normalizeEvent","event","eventType","type","isTouch","indexOf","zrDelta","wheelDelta","detail","touch","targetTouches","changedTouches","button","which","undefined","test","name","handler","attachEvent","removeEventListener","detachEvent","stop","preventDefault","stopPropagation","cancelBubble","returnValue","notLeftMouse"],"sources":["C:/Users/W/Desktop/vue_map/node_modules/zrender/lib/core/event.js"],"sourcesContent":["var Eventful = require(\"../mixin/Eventful\");\n\nexports.Dispatcher = Eventful;\n\nvar env = require(\"./env\");\n\n/**\n * 事件辅助类\n * @module zrender/core/event\n * @author Kener (@Kener-林峰, kener.linfeng@gmail.com)\n */\nvar isDomLevel2 = typeof window !== 'undefined' && !!window.addEventListener;\nvar MOUSE_EVENT_REG = /^(?:mouse|pointer|contextmenu|drag|drop)|click/;\n\nfunction getBoundingClientRect(el) {\n  // BlackBerry 5, iOS 3 (original iPhone) don't have getBoundingRect\n  return el.getBoundingClientRect ? el.getBoundingClientRect() : {\n    left: 0,\n    top: 0\n  };\n} // `calculate` is optional, default false\n\n\nfunction clientToLocal(el, e, out, calculate) {\n  out = out || {}; // According to the W3C Working Draft, offsetX and offsetY should be relative\n  // to the padding edge of the target element. The only browser using this convention\n  // is IE. Webkit uses the border edge, Opera uses the content edge, and FireFox does\n  // not support the properties.\n  // (see http://www.jacklmoore.com/notes/mouse-position/)\n  // In zr painter.dom, padding edge equals to border edge.\n  // FIXME\n  // When mousemove event triggered on ec tooltip, target is not zr painter.dom, and\n  // offsetX/Y is relative to e.target, where the calculation of zrX/Y via offsetX/Y\n  // is too complex. So css-transfrom dont support in this case temporarily.\n\n  if (calculate || !env.canvasSupported) {\n    defaultGetZrXY(el, e, out);\n  } // Caution: In FireFox, layerX/layerY Mouse position relative to the closest positioned\n  // ancestor element, so we should make sure el is positioned (e.g., not position:static).\n  // BTW1, Webkit don't return the same results as FF in non-simple cases (like add\n  // zoom-factor, overflow / opacity layers, transforms ...)\n  // BTW2, (ev.offsetY || ev.pageY - $(ev.target).offset().top) is not correct in preserve-3d.\n  // <https://bugs.jquery.com/ticket/8523#comment:14>\n  // BTW3, In ff, offsetX/offsetY is always 0.\n  else if (env.browser.firefox && e.layerX != null && e.layerX !== e.offsetX) {\n      out.zrX = e.layerX;\n      out.zrY = e.layerY;\n    } // For IE6+, chrome, safari, opera. (When will ff support offsetX?)\n    else if (e.offsetX != null) {\n        out.zrX = e.offsetX;\n        out.zrY = e.offsetY;\n      } // For some other device, e.g., IOS safari.\n      else {\n          defaultGetZrXY(el, e, out);\n        }\n\n  return out;\n}\n\nfunction defaultGetZrXY(el, e, out) {\n  // This well-known method below does not support css transform.\n  var box = getBoundingClientRect(el);\n  out.zrX = e.clientX - box.left;\n  out.zrY = e.clientY - box.top;\n}\n/**\n * 如果存在第三方嵌入的一些dom触发的事件，或touch事件，需要转换一下事件坐标.\n * `calculate` is optional, default false.\n */\n\n\nfunction normalizeEvent(el, e, calculate) {\n  e = e || window.event;\n\n  if (e.zrX != null) {\n    return e;\n  }\n\n  var eventType = e.type;\n  var isTouch = eventType && eventType.indexOf('touch') >= 0;\n\n  if (!isTouch) {\n    clientToLocal(el, e, e, calculate);\n    e.zrDelta = e.wheelDelta ? e.wheelDelta / 120 : -(e.detail || 0) / 3;\n  } else {\n    var touch = eventType != 'touchend' ? e.targetTouches[0] : e.changedTouches[0];\n    touch && clientToLocal(el, touch, e, calculate);\n  } // Add which for click: 1 === left; 2 === middle; 3 === right; otherwise: 0;\n  // See jQuery: https://github.com/jquery/jquery/blob/master/src/event.js\n  // If e.which has been defined, if may be readonly,\n  // see: https://developer.mozilla.org/en-US/docs/Web/API/MouseEvent/which\n\n\n  var button = e.button;\n\n  if (e.which == null && button !== undefined && MOUSE_EVENT_REG.test(e.type)) {\n    e.which = button & 1 ? 1 : button & 2 ? 3 : button & 4 ? 2 : 0;\n  }\n\n  return e;\n}\n/**\n * @param {HTMLElement} el\n * @param {string} name\n * @param {Function} handler\n */\n\n\nfunction addEventListener(el, name, handler) {\n  if (isDomLevel2) {\n    // Reproduct the console warning:\n    // [Violation] Added non-passive event listener to a scroll-blocking <some> event.\n    // Consider marking event handler as 'passive' to make the page more responsive.\n    // Just set console log level: verbose in chrome dev tool.\n    // then the warning log will be printed when addEventListener called.\n    // See https://github.com/WICG/EventListenerOptions/blob/gh-pages/explainer.md\n    // We have not yet found a neat way to using passive. Because in zrender the dom event\n    // listener delegate all of the upper events of element. Some of those events need\n    // to prevent default. For example, the feature `preventDefaultMouseMove` of echarts.\n    // Before passive can be adopted, these issues should be considered:\n    // (1) Whether and how a zrender user specifies an event listener passive. And by default,\n    // passive or not.\n    // (2) How to tread that some zrender event listener is passive, and some is not. If\n    // we use other way but not preventDefault of mousewheel and touchmove, browser\n    // compatibility should be handled.\n    // var opts = (env.passiveSupported && name === 'mousewheel')\n    //     ? {passive: true}\n    //     // By default, the third param of el.addEventListener is `capture: false`.\n    //     : void 0;\n    // el.addEventListener(name, handler /* , opts */);\n    el.addEventListener(name, handler);\n  } else {\n    el.attachEvent('on' + name, handler);\n  }\n}\n\nfunction removeEventListener(el, name, handler) {\n  if (isDomLevel2) {\n    el.removeEventListener(name, handler);\n  } else {\n    el.detachEvent('on' + name, handler);\n  }\n}\n/**\n * preventDefault and stopPropagation.\n * Notice: do not do that in zrender. Upper application\n * do that if necessary.\n *\n * @memberOf module:zrender/core/event\n * @method\n * @param {Event} e : event对象\n */\n\n\nvar stop = isDomLevel2 ? function (e) {\n  e.preventDefault();\n  e.stopPropagation();\n  e.cancelBubble = true;\n} : function (e) {\n  e.returnValue = false;\n  e.cancelBubble = true;\n};\n\nfunction notLeftMouse(e) {\n  // If e.which is undefined, considered as left mouse event.\n  return e.which > 1;\n} // 做向上兼容\n\n\nexports.clientToLocal = clientToLocal;\nexports.normalizeEvent = normalizeEvent;\nexports.addEventListener = addEventListener;\nexports.removeEventListener = removeEventListener;\nexports.stop = stop;\nexports.notLeftMouse = notLeftMouse;"],"mappings":"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"},"metadata":{},"sourceType":"script"}