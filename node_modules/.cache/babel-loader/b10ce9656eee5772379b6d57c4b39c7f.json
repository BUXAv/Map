{"ast":null,"code":"var _core = require(\"./core\");\n\nvar createElement = _core.createElement;\n\nvar PathProxy = require(\"../core/PathProxy\");\n\nvar BoundingRect = require(\"../core/BoundingRect\");\n\nvar matrix = require(\"../core/matrix\");\n\nvar textContain = require(\"../contain/text\");\n\nvar textHelper = require(\"../graphic/helper/text\");\n\nvar Text = require(\"../graphic/Text\"); // TODO\n// 1. shadow\n// 2. Image: sx, sy, sw, sh\n\n\nvar CMD = PathProxy.CMD;\nvar arrayJoin = Array.prototype.join;\nvar NONE = 'none';\nvar mathRound = Math.round;\nvar mathSin = Math.sin;\nvar mathCos = Math.cos;\nvar PI = Math.PI;\nvar PI2 = Math.PI * 2;\nvar degree = 180 / PI;\nvar EPSILON = 1e-4;\n\nfunction round4(val) {\n  return mathRound(val * 1e4) / 1e4;\n}\n\nfunction isAroundZero(val) {\n  return val < EPSILON && val > -EPSILON;\n}\n\nfunction pathHasFill(style, isText) {\n  var fill = isText ? style.textFill : style.fill;\n  return fill != null && fill !== NONE;\n}\n\nfunction pathHasStroke(style, isText) {\n  var stroke = isText ? style.textStroke : style.stroke;\n  return stroke != null && stroke !== NONE;\n}\n\nfunction setTransform(svgEl, m) {\n  if (m) {\n    attr(svgEl, 'transform', 'matrix(' + arrayJoin.call(m, ',') + ')');\n  }\n}\n\nfunction attr(el, key, val) {\n  if (!val || val.type !== 'linear' && val.type !== 'radial') {\n    // Don't set attribute for gradient, since it need new dom nodes\n    if (typeof val === 'string' && val.indexOf('NaN') > -1) {\n      console.log(val);\n    }\n\n    el.setAttribute(key, val);\n  }\n}\n\nfunction attrXLink(el, key, val) {\n  el.setAttributeNS('http://www.w3.org/1999/xlink', key, val);\n}\n\nfunction bindStyle(svgEl, style, isText) {\n  if (pathHasFill(style, isText)) {\n    var fill = isText ? style.textFill : style.fill;\n    fill = fill === 'transparent' ? NONE : fill;\n    /**\n     * FIXME:\n     * This is a temporary fix for Chrome's clipping bug\n     * that happens when a clip-path is referring another one.\n     * This fix should be used before Chrome's bug is fixed.\n     * For an element that has clip-path, and fill is none,\n     * set it to be \"rgba(0, 0, 0, 0.002)\" will hide the element.\n     * Otherwise, it will show black fill color.\n     * 0.002 is used because this won't work for alpha values smaller\n     * than 0.002.\n     *\n     * See\n     * https://bugs.chromium.org/p/chromium/issues/detail?id=659790\n     * for more information.\n     */\n\n    if (svgEl.getAttribute('clip-path') !== 'none' && fill === NONE) {\n      fill = 'rgba(0, 0, 0, 0.002)';\n    }\n\n    attr(svgEl, 'fill', fill);\n    attr(svgEl, 'fill-opacity', style.opacity);\n  } else {\n    attr(svgEl, 'fill', NONE);\n  }\n\n  if (pathHasStroke(style, isText)) {\n    var stroke = isText ? style.textStroke : style.stroke;\n    stroke = stroke === 'transparent' ? NONE : stroke;\n    attr(svgEl, 'stroke', stroke);\n    var strokeWidth = isText ? style.textStrokeWidth : style.lineWidth;\n    var strokeScale = !isText && style.strokeNoScale ? style.host.getLineScale() : 1;\n    attr(svgEl, 'stroke-width', strokeWidth / strokeScale); // stroke then fill for text; fill then stroke for others\n\n    attr(svgEl, 'paint-order', isText ? 'stroke' : 'fill');\n    attr(svgEl, 'stroke-opacity', style.opacity);\n    var lineDash = style.lineDash;\n\n    if (lineDash) {\n      attr(svgEl, 'stroke-dasharray', style.lineDash.join(','));\n      attr(svgEl, 'stroke-dashoffset', mathRound(style.lineDashOffset || 0));\n    } else {\n      attr(svgEl, 'stroke-dasharray', '');\n    } // PENDING\n\n\n    style.lineCap && attr(svgEl, 'stroke-linecap', style.lineCap);\n    style.lineJoin && attr(svgEl, 'stroke-linejoin', style.lineJoin);\n    style.miterLimit && attr(svgEl, 'stroke-miterlimit', style.miterLimit);\n  } else {\n    attr(svgEl, 'stroke', NONE);\n  }\n}\n/***************************************************\n * PATH\n **************************************************/\n\n\nfunction pathDataToString(path) {\n  var str = [];\n  var data = path.data;\n  var dataLength = path.len();\n\n  for (var i = 0; i < dataLength;) {\n    var cmd = data[i++];\n    var cmdStr = '';\n    var nData = 0;\n\n    switch (cmd) {\n      case CMD.M:\n        cmdStr = 'M';\n        nData = 2;\n        break;\n\n      case CMD.L:\n        cmdStr = 'L';\n        nData = 2;\n        break;\n\n      case CMD.Q:\n        cmdStr = 'Q';\n        nData = 4;\n        break;\n\n      case CMD.C:\n        cmdStr = 'C';\n        nData = 6;\n        break;\n\n      case CMD.A:\n        var cx = data[i++];\n        var cy = data[i++];\n        var rx = data[i++];\n        var ry = data[i++];\n        var theta = data[i++];\n        var dTheta = data[i++];\n        var psi = data[i++];\n        var clockwise = data[i++];\n        var dThetaPositive = Math.abs(dTheta);\n        var isCircle = isAroundZero(dThetaPositive - PI2) && !isAroundZero(dThetaPositive);\n        var large = false;\n\n        if (dThetaPositive >= PI2) {\n          large = true;\n        } else if (isAroundZero(dThetaPositive)) {\n          large = false;\n        } else {\n          large = (dTheta > -PI && dTheta < 0 || dTheta > PI) === !!clockwise;\n        }\n\n        var x0 = round4(cx + rx * mathCos(theta));\n        var y0 = round4(cy + ry * mathSin(theta)); // It will not draw if start point and end point are exactly the same\n        // We need to shift the end point with a small value\n        // FIXME A better way to draw circle ?\n\n        if (isCircle) {\n          if (clockwise) {\n            dTheta = PI2 - 1e-4;\n          } else {\n            dTheta = -PI2 + 1e-4;\n          }\n\n          large = true;\n\n          if (i === 9) {\n            // Move to (x0, y0) only when CMD.A comes at the\n            // first position of a shape.\n            // For instance, when drawing a ring, CMD.A comes\n            // after CMD.M, so it's unnecessary to move to\n            // (x0, y0).\n            str.push('M', x0, y0);\n          }\n        }\n\n        var x = round4(cx + rx * mathCos(theta + dTheta));\n        var y = round4(cy + ry * mathSin(theta + dTheta)); // FIXME Ellipse\n\n        str.push('A', round4(rx), round4(ry), mathRound(psi * degree), +large, +clockwise, x, y);\n        break;\n\n      case CMD.Z:\n        cmdStr = 'Z';\n        break;\n\n      case CMD.R:\n        var x = round4(data[i++]);\n        var y = round4(data[i++]);\n        var w = round4(data[i++]);\n        var h = round4(data[i++]);\n        str.push('M', x, y, 'L', x + w, y, 'L', x + w, y + h, 'L', x, y + h, 'L', x, y);\n        break;\n    }\n\n    cmdStr && str.push(cmdStr);\n\n    for (var j = 0; j < nData; j++) {\n      // PENDING With scale\n      str.push(round4(data[i++]));\n    }\n  }\n\n  return str.join(' ');\n}\n\nvar svgPath = {};\n\nsvgPath.brush = function (el) {\n  var style = el.style;\n  var svgEl = el.__svgEl;\n\n  if (!svgEl) {\n    svgEl = createElement('path');\n    el.__svgEl = svgEl;\n  }\n\n  if (!el.path) {\n    el.createPathProxy();\n  }\n\n  var path = el.path;\n\n  if (el.__dirtyPath) {\n    path.beginPath();\n    el.buildPath(path, el.shape);\n    el.__dirtyPath = false;\n    var pathStr = pathDataToString(path);\n\n    if (pathStr.indexOf('NaN') < 0) {\n      // Ignore illegal path, which may happen such in out-of-range\n      // data in Calendar series.\n      attr(svgEl, 'd', pathStr);\n    }\n  }\n\n  bindStyle(svgEl, style);\n  setTransform(svgEl, el.transform);\n\n  if (style.text != null) {\n    svgTextDrawRectText(el, el.getBoundingRect());\n  }\n};\n/***************************************************\n * IMAGE\n **************************************************/\n\n\nvar svgImage = {};\n\nsvgImage.brush = function (el) {\n  var style = el.style;\n  var image = style.image;\n\n  if (image instanceof HTMLImageElement) {\n    var src = image.src;\n    image = src;\n  }\n\n  if (!image) {\n    return;\n  }\n\n  var x = style.x || 0;\n  var y = style.y || 0;\n  var dw = style.width;\n  var dh = style.height;\n  var svgEl = el.__svgEl;\n\n  if (!svgEl) {\n    svgEl = createElement('image');\n    el.__svgEl = svgEl;\n  }\n\n  if (image !== el.__imageSrc) {\n    attrXLink(svgEl, 'href', image); // Caching image src\n\n    el.__imageSrc = image;\n  }\n\n  attr(svgEl, 'width', dw);\n  attr(svgEl, 'height', dh);\n  attr(svgEl, 'x', x);\n  attr(svgEl, 'y', y);\n  setTransform(svgEl, el.transform);\n\n  if (style.text != null) {\n    svgTextDrawRectText(el, el.getBoundingRect());\n  }\n};\n/***************************************************\n * TEXT\n **************************************************/\n\n\nvar svgText = {};\nvar tmpRect = new BoundingRect();\n\nvar svgTextDrawRectText = function (el, rect, textRect) {\n  var style = el.style;\n  el.__dirty && textHelper.normalizeTextStyle(style, true);\n  var text = style.text; // Convert to string\n\n  if (text == null) {\n    // Draw no text only when text is set to null, but not ''\n    return;\n  } else {\n    text += '';\n  }\n\n  var textSvgEl = el.__textSvgEl;\n\n  if (!textSvgEl) {\n    textSvgEl = createElement('text');\n    el.__textSvgEl = textSvgEl;\n  }\n\n  var x;\n  var y;\n  var textPosition = style.textPosition;\n  var distance = style.textDistance;\n  var align = style.textAlign || 'left';\n\n  if (typeof style.fontSize === 'number') {\n    style.fontSize += 'px';\n  }\n\n  var font = style.font || [style.fontStyle || '', style.fontWeight || '', style.fontSize || '', style.fontFamily || ''].join(' ') || textContain.DEFAULT_FONT;\n  var verticalAlign = getVerticalAlignForSvg(style.textVerticalAlign);\n  textRect = textContain.getBoundingRect(text, font, align, verticalAlign);\n  var lineHeight = textRect.lineHeight; // Text position represented by coord\n\n  if (textPosition instanceof Array) {\n    x = rect.x + textPosition[0];\n    y = rect.y + textPosition[1];\n  } else {\n    var newPos = textContain.adjustTextPositionOnRect(textPosition, rect, distance);\n    x = newPos.x;\n    y = newPos.y;\n    verticalAlign = getVerticalAlignForSvg(newPos.textVerticalAlign);\n    align = newPos.textAlign;\n  }\n\n  attr(textSvgEl, 'alignment-baseline', verticalAlign);\n\n  if (font) {\n    textSvgEl.style.font = font;\n  }\n\n  var textPadding = style.textPadding; // Make baseline top\n\n  attr(textSvgEl, 'x', x);\n  attr(textSvgEl, 'y', y);\n  bindStyle(textSvgEl, style, true);\n\n  if (el instanceof Text || el.style.transformText) {\n    // Transform text with element\n    setTransform(textSvgEl, el.transform);\n  } else {\n    if (el.transform) {\n      tmpRect.copy(rect);\n      tmpRect.applyTransform(el.transform);\n      rect = tmpRect;\n    } else {\n      var pos = el.transformCoordToGlobal(rect.x, rect.y);\n      rect.x = pos[0];\n      rect.y = pos[1];\n    } // Text rotation, but no element transform\n\n\n    var origin = style.textOrigin;\n\n    if (origin === 'center') {\n      x = textRect.width / 2 + x;\n      y = textRect.height / 2 + y;\n    } else if (origin) {\n      x = origin[0] + x;\n      y = origin[1] + y;\n    }\n\n    var rotate = -style.textRotation || 0;\n    var transform = matrix.create(); // Apply textRotate to element matrix\n\n    matrix.rotate(transform, el.transform, rotate);\n    setTransform(textSvgEl, transform);\n  }\n\n  var textLines = text.split('\\n');\n  var nTextLines = textLines.length;\n  var textAnchor = align; // PENDING\n\n  if (textAnchor === 'left') {\n    textAnchor = 'start';\n    textPadding && (x += textPadding[3]);\n  } else if (textAnchor === 'right') {\n    textAnchor = 'end';\n    textPadding && (x -= textPadding[1]);\n  } else if (textAnchor === 'center') {\n    textAnchor = 'middle';\n    textPadding && (x += (textPadding[3] - textPadding[1]) / 2);\n  }\n\n  var dy = 0;\n\n  if (verticalAlign === 'baseline') {\n    dy = -textRect.height + lineHeight;\n    textPadding && (dy -= textPadding[2]);\n  } else if (verticalAlign === 'middle') {\n    dy = (-textRect.height + lineHeight) / 2;\n    textPadding && (y += (textPadding[0] - textPadding[2]) / 2);\n  } else {\n    textPadding && (dy += textPadding[0]);\n  } // Font may affect position of each tspan elements\n\n\n  if (el.__text !== text || el.__textFont !== font) {\n    var tspanList = el.__tspanList || [];\n    el.__tspanList = tspanList;\n\n    for (var i = 0; i < nTextLines; i++) {\n      // Using cached tspan elements\n      var tspan = tspanList[i];\n\n      if (!tspan) {\n        tspan = tspanList[i] = createElement('tspan');\n        textSvgEl.appendChild(tspan);\n        attr(tspan, 'alignment-baseline', verticalAlign);\n        attr(tspan, 'text-anchor', textAnchor);\n      } else {\n        tspan.innerHTML = '';\n      }\n\n      attr(tspan, 'x', x);\n      attr(tspan, 'y', y + i * lineHeight + dy);\n      tspan.appendChild(document.createTextNode(textLines[i]));\n    } // Remove unsed tspan elements\n\n\n    for (; i < tspanList.length; i++) {\n      textSvgEl.removeChild(tspanList[i]);\n    }\n\n    tspanList.length = nTextLines;\n    el.__text = text;\n    el.__textFont = font;\n  } else if (el.__tspanList.length) {\n    // Update span x and y\n    var len = el.__tspanList.length;\n\n    for (var i = 0; i < len; ++i) {\n      var tspan = el.__tspanList[i];\n\n      if (tspan) {\n        attr(tspan, 'x', x);\n        attr(tspan, 'y', y + i * lineHeight + dy);\n      }\n    }\n  }\n};\n\nfunction getVerticalAlignForSvg(verticalAlign) {\n  if (verticalAlign === 'middle') {\n    return 'middle';\n  } else if (verticalAlign === 'bottom') {\n    return 'baseline';\n  } else {\n    return 'hanging';\n  }\n}\n\nsvgText.drawRectText = svgTextDrawRectText;\n\nsvgText.brush = function (el) {\n  var style = el.style;\n\n  if (style.text != null) {\n    // 强制设置 textPosition\n    style.textPosition = [0, 0];\n    svgTextDrawRectText(el, {\n      x: style.x || 0,\n      y: style.y || 0,\n      width: 0,\n      height: 0\n    }, el.getBoundingRect());\n  }\n};\n\nexports.path = svgPath;\nexports.image = svgImage;\nexports.text = svgText;","map":{"version":3,"names":["_core","require","createElement","PathProxy","BoundingRect","matrix","textContain","textHelper","Text","CMD","arrayJoin","Array","prototype","join","NONE","mathRound","Math","round","mathSin","sin","mathCos","cos","PI","PI2","degree","EPSILON","round4","val","isAroundZero","pathHasFill","style","isText","fill","textFill","pathHasStroke","stroke","textStroke","setTransform","svgEl","m","attr","call","el","key","type","indexOf","console","log","setAttribute","attrXLink","setAttributeNS","bindStyle","getAttribute","opacity","strokeWidth","textStrokeWidth","lineWidth","strokeScale","strokeNoScale","host","getLineScale","lineDash","lineDashOffset","lineCap","lineJoin","miterLimit","pathDataToString","path","str","data","dataLength","len","i","cmd","cmdStr","nData","M","L","Q","C","A","cx","cy","rx","ry","theta","dTheta","psi","clockwise","dThetaPositive","abs","isCircle","large","x0","y0","push","x","y","Z","R","w","h","j","svgPath","brush","__svgEl","createPathProxy","__dirtyPath","beginPath","buildPath","shape","pathStr","transform","text","svgTextDrawRectText","getBoundingRect","svgImage","image","HTMLImageElement","src","dw","width","dh","height","__imageSrc","svgText","tmpRect","rect","textRect","__dirty","normalizeTextStyle","textSvgEl","__textSvgEl","textPosition","distance","textDistance","align","textAlign","fontSize","font","fontStyle","fontWeight","fontFamily","DEFAULT_FONT","verticalAlign","getVerticalAlignForSvg","textVerticalAlign","lineHeight","newPos","adjustTextPositionOnRect","textPadding","transformText","copy","applyTransform","pos","transformCoordToGlobal","origin","textOrigin","rotate","textRotation","create","textLines","split","nTextLines","length","textAnchor","dy","__text","__textFont","tspanList","__tspanList","tspan","appendChild","innerHTML","document","createTextNode","removeChild","drawRectText","exports"],"sources":["C:/Users/W/Desktop/vue_map/node_modules/zrender/lib/svg/graphic.js"],"sourcesContent":["var _core = require(\"./core\");\n\nvar createElement = _core.createElement;\n\nvar PathProxy = require(\"../core/PathProxy\");\n\nvar BoundingRect = require(\"../core/BoundingRect\");\n\nvar matrix = require(\"../core/matrix\");\n\nvar textContain = require(\"../contain/text\");\n\nvar textHelper = require(\"../graphic/helper/text\");\n\nvar Text = require(\"../graphic/Text\");\n\n// TODO\n// 1. shadow\n// 2. Image: sx, sy, sw, sh\nvar CMD = PathProxy.CMD;\nvar arrayJoin = Array.prototype.join;\nvar NONE = 'none';\nvar mathRound = Math.round;\nvar mathSin = Math.sin;\nvar mathCos = Math.cos;\nvar PI = Math.PI;\nvar PI2 = Math.PI * 2;\nvar degree = 180 / PI;\nvar EPSILON = 1e-4;\n\nfunction round4(val) {\n  return mathRound(val * 1e4) / 1e4;\n}\n\nfunction isAroundZero(val) {\n  return val < EPSILON && val > -EPSILON;\n}\n\nfunction pathHasFill(style, isText) {\n  var fill = isText ? style.textFill : style.fill;\n  return fill != null && fill !== NONE;\n}\n\nfunction pathHasStroke(style, isText) {\n  var stroke = isText ? style.textStroke : style.stroke;\n  return stroke != null && stroke !== NONE;\n}\n\nfunction setTransform(svgEl, m) {\n  if (m) {\n    attr(svgEl, 'transform', 'matrix(' + arrayJoin.call(m, ',') + ')');\n  }\n}\n\nfunction attr(el, key, val) {\n  if (!val || val.type !== 'linear' && val.type !== 'radial') {\n    // Don't set attribute for gradient, since it need new dom nodes\n    if (typeof val === 'string' && val.indexOf('NaN') > -1) {\n      console.log(val);\n    }\n\n    el.setAttribute(key, val);\n  }\n}\n\nfunction attrXLink(el, key, val) {\n  el.setAttributeNS('http://www.w3.org/1999/xlink', key, val);\n}\n\nfunction bindStyle(svgEl, style, isText) {\n  if (pathHasFill(style, isText)) {\n    var fill = isText ? style.textFill : style.fill;\n    fill = fill === 'transparent' ? NONE : fill;\n    /**\n     * FIXME:\n     * This is a temporary fix for Chrome's clipping bug\n     * that happens when a clip-path is referring another one.\n     * This fix should be used before Chrome's bug is fixed.\n     * For an element that has clip-path, and fill is none,\n     * set it to be \"rgba(0, 0, 0, 0.002)\" will hide the element.\n     * Otherwise, it will show black fill color.\n     * 0.002 is used because this won't work for alpha values smaller\n     * than 0.002.\n     *\n     * See\n     * https://bugs.chromium.org/p/chromium/issues/detail?id=659790\n     * for more information.\n     */\n\n    if (svgEl.getAttribute('clip-path') !== 'none' && fill === NONE) {\n      fill = 'rgba(0, 0, 0, 0.002)';\n    }\n\n    attr(svgEl, 'fill', fill);\n    attr(svgEl, 'fill-opacity', style.opacity);\n  } else {\n    attr(svgEl, 'fill', NONE);\n  }\n\n  if (pathHasStroke(style, isText)) {\n    var stroke = isText ? style.textStroke : style.stroke;\n    stroke = stroke === 'transparent' ? NONE : stroke;\n    attr(svgEl, 'stroke', stroke);\n    var strokeWidth = isText ? style.textStrokeWidth : style.lineWidth;\n    var strokeScale = !isText && style.strokeNoScale ? style.host.getLineScale() : 1;\n    attr(svgEl, 'stroke-width', strokeWidth / strokeScale); // stroke then fill for text; fill then stroke for others\n\n    attr(svgEl, 'paint-order', isText ? 'stroke' : 'fill');\n    attr(svgEl, 'stroke-opacity', style.opacity);\n    var lineDash = style.lineDash;\n\n    if (lineDash) {\n      attr(svgEl, 'stroke-dasharray', style.lineDash.join(','));\n      attr(svgEl, 'stroke-dashoffset', mathRound(style.lineDashOffset || 0));\n    } else {\n      attr(svgEl, 'stroke-dasharray', '');\n    } // PENDING\n\n\n    style.lineCap && attr(svgEl, 'stroke-linecap', style.lineCap);\n    style.lineJoin && attr(svgEl, 'stroke-linejoin', style.lineJoin);\n    style.miterLimit && attr(svgEl, 'stroke-miterlimit', style.miterLimit);\n  } else {\n    attr(svgEl, 'stroke', NONE);\n  }\n}\n/***************************************************\n * PATH\n **************************************************/\n\n\nfunction pathDataToString(path) {\n  var str = [];\n  var data = path.data;\n  var dataLength = path.len();\n\n  for (var i = 0; i < dataLength;) {\n    var cmd = data[i++];\n    var cmdStr = '';\n    var nData = 0;\n\n    switch (cmd) {\n      case CMD.M:\n        cmdStr = 'M';\n        nData = 2;\n        break;\n\n      case CMD.L:\n        cmdStr = 'L';\n        nData = 2;\n        break;\n\n      case CMD.Q:\n        cmdStr = 'Q';\n        nData = 4;\n        break;\n\n      case CMD.C:\n        cmdStr = 'C';\n        nData = 6;\n        break;\n\n      case CMD.A:\n        var cx = data[i++];\n        var cy = data[i++];\n        var rx = data[i++];\n        var ry = data[i++];\n        var theta = data[i++];\n        var dTheta = data[i++];\n        var psi = data[i++];\n        var clockwise = data[i++];\n        var dThetaPositive = Math.abs(dTheta);\n        var isCircle = isAroundZero(dThetaPositive - PI2) && !isAroundZero(dThetaPositive);\n        var large = false;\n\n        if (dThetaPositive >= PI2) {\n          large = true;\n        } else if (isAroundZero(dThetaPositive)) {\n          large = false;\n        } else {\n          large = (dTheta > -PI && dTheta < 0 || dTheta > PI) === !!clockwise;\n        }\n\n        var x0 = round4(cx + rx * mathCos(theta));\n        var y0 = round4(cy + ry * mathSin(theta)); // It will not draw if start point and end point are exactly the same\n        // We need to shift the end point with a small value\n        // FIXME A better way to draw circle ?\n\n        if (isCircle) {\n          if (clockwise) {\n            dTheta = PI2 - 1e-4;\n          } else {\n            dTheta = -PI2 + 1e-4;\n          }\n\n          large = true;\n\n          if (i === 9) {\n            // Move to (x0, y0) only when CMD.A comes at the\n            // first position of a shape.\n            // For instance, when drawing a ring, CMD.A comes\n            // after CMD.M, so it's unnecessary to move to\n            // (x0, y0).\n            str.push('M', x0, y0);\n          }\n        }\n\n        var x = round4(cx + rx * mathCos(theta + dTheta));\n        var y = round4(cy + ry * mathSin(theta + dTheta)); // FIXME Ellipse\n\n        str.push('A', round4(rx), round4(ry), mathRound(psi * degree), +large, +clockwise, x, y);\n        break;\n\n      case CMD.Z:\n        cmdStr = 'Z';\n        break;\n\n      case CMD.R:\n        var x = round4(data[i++]);\n        var y = round4(data[i++]);\n        var w = round4(data[i++]);\n        var h = round4(data[i++]);\n        str.push('M', x, y, 'L', x + w, y, 'L', x + w, y + h, 'L', x, y + h, 'L', x, y);\n        break;\n    }\n\n    cmdStr && str.push(cmdStr);\n\n    for (var j = 0; j < nData; j++) {\n      // PENDING With scale\n      str.push(round4(data[i++]));\n    }\n  }\n\n  return str.join(' ');\n}\n\nvar svgPath = {};\n\nsvgPath.brush = function (el) {\n  var style = el.style;\n  var svgEl = el.__svgEl;\n\n  if (!svgEl) {\n    svgEl = createElement('path');\n    el.__svgEl = svgEl;\n  }\n\n  if (!el.path) {\n    el.createPathProxy();\n  }\n\n  var path = el.path;\n\n  if (el.__dirtyPath) {\n    path.beginPath();\n    el.buildPath(path, el.shape);\n    el.__dirtyPath = false;\n    var pathStr = pathDataToString(path);\n\n    if (pathStr.indexOf('NaN') < 0) {\n      // Ignore illegal path, which may happen such in out-of-range\n      // data in Calendar series.\n      attr(svgEl, 'd', pathStr);\n    }\n  }\n\n  bindStyle(svgEl, style);\n  setTransform(svgEl, el.transform);\n\n  if (style.text != null) {\n    svgTextDrawRectText(el, el.getBoundingRect());\n  }\n};\n/***************************************************\n * IMAGE\n **************************************************/\n\n\nvar svgImage = {};\n\nsvgImage.brush = function (el) {\n  var style = el.style;\n  var image = style.image;\n\n  if (image instanceof HTMLImageElement) {\n    var src = image.src;\n    image = src;\n  }\n\n  if (!image) {\n    return;\n  }\n\n  var x = style.x || 0;\n  var y = style.y || 0;\n  var dw = style.width;\n  var dh = style.height;\n  var svgEl = el.__svgEl;\n\n  if (!svgEl) {\n    svgEl = createElement('image');\n    el.__svgEl = svgEl;\n  }\n\n  if (image !== el.__imageSrc) {\n    attrXLink(svgEl, 'href', image); // Caching image src\n\n    el.__imageSrc = image;\n  }\n\n  attr(svgEl, 'width', dw);\n  attr(svgEl, 'height', dh);\n  attr(svgEl, 'x', x);\n  attr(svgEl, 'y', y);\n  setTransform(svgEl, el.transform);\n\n  if (style.text != null) {\n    svgTextDrawRectText(el, el.getBoundingRect());\n  }\n};\n/***************************************************\n * TEXT\n **************************************************/\n\n\nvar svgText = {};\nvar tmpRect = new BoundingRect();\n\nvar svgTextDrawRectText = function (el, rect, textRect) {\n  var style = el.style;\n  el.__dirty && textHelper.normalizeTextStyle(style, true);\n  var text = style.text; // Convert to string\n\n  if (text == null) {\n    // Draw no text only when text is set to null, but not ''\n    return;\n  } else {\n    text += '';\n  }\n\n  var textSvgEl = el.__textSvgEl;\n\n  if (!textSvgEl) {\n    textSvgEl = createElement('text');\n    el.__textSvgEl = textSvgEl;\n  }\n\n  var x;\n  var y;\n  var textPosition = style.textPosition;\n  var distance = style.textDistance;\n  var align = style.textAlign || 'left';\n\n  if (typeof style.fontSize === 'number') {\n    style.fontSize += 'px';\n  }\n\n  var font = style.font || [style.fontStyle || '', style.fontWeight || '', style.fontSize || '', style.fontFamily || ''].join(' ') || textContain.DEFAULT_FONT;\n  var verticalAlign = getVerticalAlignForSvg(style.textVerticalAlign);\n  textRect = textContain.getBoundingRect(text, font, align, verticalAlign);\n  var lineHeight = textRect.lineHeight; // Text position represented by coord\n\n  if (textPosition instanceof Array) {\n    x = rect.x + textPosition[0];\n    y = rect.y + textPosition[1];\n  } else {\n    var newPos = textContain.adjustTextPositionOnRect(textPosition, rect, distance);\n    x = newPos.x;\n    y = newPos.y;\n    verticalAlign = getVerticalAlignForSvg(newPos.textVerticalAlign);\n    align = newPos.textAlign;\n  }\n\n  attr(textSvgEl, 'alignment-baseline', verticalAlign);\n\n  if (font) {\n    textSvgEl.style.font = font;\n  }\n\n  var textPadding = style.textPadding; // Make baseline top\n\n  attr(textSvgEl, 'x', x);\n  attr(textSvgEl, 'y', y);\n  bindStyle(textSvgEl, style, true);\n\n  if (el instanceof Text || el.style.transformText) {\n    // Transform text with element\n    setTransform(textSvgEl, el.transform);\n  } else {\n    if (el.transform) {\n      tmpRect.copy(rect);\n      tmpRect.applyTransform(el.transform);\n      rect = tmpRect;\n    } else {\n      var pos = el.transformCoordToGlobal(rect.x, rect.y);\n      rect.x = pos[0];\n      rect.y = pos[1];\n    } // Text rotation, but no element transform\n\n\n    var origin = style.textOrigin;\n\n    if (origin === 'center') {\n      x = textRect.width / 2 + x;\n      y = textRect.height / 2 + y;\n    } else if (origin) {\n      x = origin[0] + x;\n      y = origin[1] + y;\n    }\n\n    var rotate = -style.textRotation || 0;\n    var transform = matrix.create(); // Apply textRotate to element matrix\n\n    matrix.rotate(transform, el.transform, rotate);\n    setTransform(textSvgEl, transform);\n  }\n\n  var textLines = text.split('\\n');\n  var nTextLines = textLines.length;\n  var textAnchor = align; // PENDING\n\n  if (textAnchor === 'left') {\n    textAnchor = 'start';\n    textPadding && (x += textPadding[3]);\n  } else if (textAnchor === 'right') {\n    textAnchor = 'end';\n    textPadding && (x -= textPadding[1]);\n  } else if (textAnchor === 'center') {\n    textAnchor = 'middle';\n    textPadding && (x += (textPadding[3] - textPadding[1]) / 2);\n  }\n\n  var dy = 0;\n\n  if (verticalAlign === 'baseline') {\n    dy = -textRect.height + lineHeight;\n    textPadding && (dy -= textPadding[2]);\n  } else if (verticalAlign === 'middle') {\n    dy = (-textRect.height + lineHeight) / 2;\n    textPadding && (y += (textPadding[0] - textPadding[2]) / 2);\n  } else {\n    textPadding && (dy += textPadding[0]);\n  } // Font may affect position of each tspan elements\n\n\n  if (el.__text !== text || el.__textFont !== font) {\n    var tspanList = el.__tspanList || [];\n    el.__tspanList = tspanList;\n\n    for (var i = 0; i < nTextLines; i++) {\n      // Using cached tspan elements\n      var tspan = tspanList[i];\n\n      if (!tspan) {\n        tspan = tspanList[i] = createElement('tspan');\n        textSvgEl.appendChild(tspan);\n        attr(tspan, 'alignment-baseline', verticalAlign);\n        attr(tspan, 'text-anchor', textAnchor);\n      } else {\n        tspan.innerHTML = '';\n      }\n\n      attr(tspan, 'x', x);\n      attr(tspan, 'y', y + i * lineHeight + dy);\n      tspan.appendChild(document.createTextNode(textLines[i]));\n    } // Remove unsed tspan elements\n\n\n    for (; i < tspanList.length; i++) {\n      textSvgEl.removeChild(tspanList[i]);\n    }\n\n    tspanList.length = nTextLines;\n    el.__text = text;\n    el.__textFont = font;\n  } else if (el.__tspanList.length) {\n    // Update span x and y\n    var len = el.__tspanList.length;\n\n    for (var i = 0; i < len; ++i) {\n      var tspan = el.__tspanList[i];\n\n      if (tspan) {\n        attr(tspan, 'x', x);\n        attr(tspan, 'y', y + i * lineHeight + dy);\n      }\n    }\n  }\n};\n\nfunction getVerticalAlignForSvg(verticalAlign) {\n  if (verticalAlign === 'middle') {\n    return 'middle';\n  } else if (verticalAlign === 'bottom') {\n    return 'baseline';\n  } else {\n    return 'hanging';\n  }\n}\n\nsvgText.drawRectText = svgTextDrawRectText;\n\nsvgText.brush = function (el) {\n  var style = el.style;\n\n  if (style.text != null) {\n    // 强制设置 textPosition\n    style.textPosition = [0, 0];\n    svgTextDrawRectText(el, {\n      x: style.x || 0,\n      y: style.y || 0,\n      width: 0,\n      height: 0\n    }, el.getBoundingRect());\n  }\n};\n\nexports.path = svgPath;\nexports.image = svgImage;\nexports.text = svgText;"],"mappings":"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"},"metadata":{},"sourceType":"script"}